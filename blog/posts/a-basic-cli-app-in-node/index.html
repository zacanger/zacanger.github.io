<!DOCTYPE html>
<html lang="en">

  <head>
    <title>Node CLI 1, React Component Generator | Zac Anger's Blog</title>
    <meta name="description" content="Node CLI 1, React Component Generator" />
    <meta name="keywords" content="['node', 'cli', 'terminal']" />
    <meta name="twitter:description" content="Node CLI 1, React Component Generator" />
    <meta name="twitter:title" content="Node CLI 1, React Component Generator" />
    <meta property="og:description" content="Node CLI 1, React Component Generator" />
    <meta property="og:title" content="Node CLI 1, React Component Generator" />

    <meta charset="utf-8" />
<link rel="shortcut icon" type="image/x-icon" href="/favicon.ico" />
<meta name="author" content="Zac Anger" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<meta name="twitter:card" content="summary" />
<meta name="twitter:site" content="@zacanger" />
<meta name="twitter:creator" content="@zacanger" />
<meta name="twitter:image" content="https://zacanger.com/logo.png" />
<meta property="og:type" content="article" />
<meta property="og:site_name" content="Zac Anger's Blog" />
<meta property="og:image" content="https://zacanger.com/logo.png" />
<link rel="stylesheet" type="text/css" href="/styles.css" />
  </head>

  <body>
    <header>
      <h1><a href="/blog">Zac Anger's Blog</a></h1>
      <h2>Node CLI 1, React Component Generator</h2>
      <h3>2016-08-24</h3>
      <h4><small>Tags: node, cli, terminal</small></h4>
    </header>
    <hr>
    <div>
      <p>I'm going to walk through a super basic app in Node that you can
run in your terminal. I've got a more in-depth tutorial coming up soon,
but wanted to get this idea out there tonight.</p>
<p><a href="http://ryanwalsh.io">Someone</a> brought up the idea of a React component
generator the other day, and I immediately thought <em>Bash script</em>. Well, that's
pretty easy.</p>
<div class="highlight"><pre><span></span><span class="ch">#!/bin/bash</span>

<span class="nb">echo</span> <span class="s2">&quot;</span>
<span class="s2">import React from &#39;react&#39;</span>

<span class="s2">const </span><span class="nv">$1</span><span class="s2"> = () =&gt; (</span>
<span class="s2">  &lt;div&gt;</span><span class="nv">$1</span><span class="s2">&lt;/div&gt;</span>
<span class="s2">)</span>

<span class="s2">export default </span><span class="nv">$1</span><span class="s2"></span>
<span class="s2">&quot;</span> &gt; <span class="nv">$1</span>.js
</pre></div>

<p>There you go, a basic pure component generator script. This could be a little
more complex, handle some content, handle generating a class instead of a
function, and whatever, but that's the basic idea, in Bash.</p>
<blockquote>
<p>Keep in mind, none of this is React-specific. All we're doing is handling
arguments and spitting out a file.</p>
</blockquote>
<p>The idea here is that you just call this script from somewhere and it gives you
a component already laid out for you. It's not too fancy, but it's useful.</p>
<div class="highlight"><pre><span></span>$ ./my-script.sh Foo

$ cat Foo.js

import React from <span class="s1">&#39;react&#39;</span>

const <span class="nv">Foo</span> <span class="o">=</span> <span class="o">()</span> <span class="o">=</span>&gt; <span class="o">(</span>
  &lt;div&gt;Foo&lt;/div&gt;
<span class="o">)</span>

<span class="nb">export</span> default Foo
</pre></div>

<p>That could save a little bit of time. I use something similar for generating an
<code>index.html</code> for React apps.</p>
<p>This is a lot like using snippets in your editor, except it doesn't rely on you
having that editor and those snippets handy. You could pass this around to anyone
who uses any editor, on any computer, and get the same result. You could upload
it to somewhere and just <code>curl my-script.sh | bash</code> and not even need to have the
file around. Pretty handy, I think.</p>
<p>But... what about in JS? I mean, we're JavaScript devs, right?</p>
<p>It's still pretty straightforward in Node, as it happens.</p>
<p>We only need one file to get going. I'll call mine <del>compgen</del> rcg.js, for React
Component Generator.</p>
<div class="highlight"><pre><span></span>touch rcg.js     <span class="c1"># create a new file</span>
chmod +x rcg.js  <span class="c1"># set an executable bit on the file</span>
vi rcg.js        <span class="c1"># open it for editing</span>
</pre></div>

<p>(Obviously substitute your editor for <code>vi</code>.)</p>
<p>What's the first thing any executable script needs? A shebang! We'll also go
ahead and use <code>process</code>. If you don't know <code>process</code>, open Node in a terminal
(<code>node</code>) and just type in <code>process</code>. It's pretty cool. The bit we want is
<code>.argv</code>, which is an array of all arguments passed. It always has <code>node</code> and the
file that's calling it as the first two elements, so we don't need those.</p>
<div class="highlight"><pre><span></span><span class="ch">#!/usr/bin/env node</span>

<span class="kr">const</span> <span class="nx">args</span> <span class="o">=</span> <span class="nx">process</span><span class="p">.</span><span class="nx">argv</span><span class="p">.</span><span class="nx">slice</span><span class="p">(</span><span class="mi">2</span><span class="p">)</span>
<span class="kr">const</span> <span class="nx">type</span> <span class="o">=</span> <span class="nx">args</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
<span class="kr">const</span> <span class="nx">component</span> <span class="o">=</span> <span class="nx">args</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span>
</pre></div>

<p>What we're going for here is a script we can call like <code>./rcg.js function Foo</code>,
or with a <code>class</code> parameter instead.</p>
<p>The next thing we'll need to do is actually sketch out these components. I'll be
using template literals. If you don't have a recent version of Node, you should
update. If you can't update, you'll have to use string concatenation instead (so
really, you should just update). To update (on Mac or Linux; on Windows you
should just go to <a href="http://nodejs.org">the website</a> and download a new version),
just <code>npm i -g n &amp;&amp; n latest</code>.</p>
<p>Let's write out what a pure (function) component looks like, first.</p>
<div class="highlight"><pre><span></span><span class="kr">const</span> <span class="nx">pureComponent</span> <span class="o">=</span> <span class="sb">`</span>
<span class="sb">import React from &#39;react&#39;</span>

<span class="sb">const </span><span class="si">${</span><span class="nx">component</span><span class="si">}</span><span class="sb"> = () =&gt; &lt;div&gt;</span><span class="si">${</span><span class="nx">component</span><span class="si">}</span><span class="sb">&lt;/div&gt;</span>

<span class="sb">export default </span><span class="si">${</span><span class="nx">component</span><span class="si">}</span><span class="sb"></span>
<span class="sb">`</span>
</pre></div>

<p>It doesn't have a whole lot going on, I know. This is just a quick file
generator, it can't write your code for you. :P</p>
<p>If you can't update node, that'd look something like this:</p>
<div class="highlight"><pre><span></span><span class="kd">var</span> <span class="nx">pureComponent</span> <span class="o">=</span> <span class="s1">&#39;import React from \&#39;react\&#39;&#39;</span> <span class="o">+</span>
<span class="s1">&#39;function &#39;</span> <span class="o">+</span> <span class="nx">component</span> <span class="o">+</span> <span class="s1">&#39;(){&#39;</span> <span class="o">+</span>
  <span class="s1">&#39;return &lt;div&gt;&#39;</span> <span class="o">+</span> <span class="nx">component</span> <span class="o">+</span> <span class="s1">&#39;&lt;/div&gt;&#39;</span> <span class="o">+</span>
<span class="s1">&#39;}&#39;</span> <span class="o">+</span>
<span class="s1">&#39;module.exports = &#39;</span> <span class="o">+</span> <span class="nx">component</span>
</pre></div>

<p>(Kind of annoying, right?)</p>
<p>So now, let's get one for a class (I won't go through doing this one with an old
version of Node, nor with <code>React.createClass</code>&mdash;just with ES2015 classes).</p>
<div class="highlight"><pre><span></span><span class="kr">const</span> <span class="nx">classComponent</span> <span class="o">=</span> <span class="sb">`</span>
<span class="sb">import React, { Component } from &#39;react&#39;</span>

<span class="sb">export default class </span><span class="si">${</span><span class="nx">component</span><span class="si">}</span><span class="sb"> extends Component {</span>
<span class="sb">  render() {</span>
<span class="sb">    return (</span>
<span class="sb">      &lt;div&gt;</span><span class="si">${</span><span class="nx">component</span><span class="si">}</span><span class="sb">&lt;/div&gt;</span>
<span class="sb">    )</span>
<span class="sb">  }</span>
<span class="sb">}</span>
<span class="sb">`</span>
</pre></div>

<p>Lovely! Obviously this should be more complex; if your class only has a render
function that returns JSX, just use a function instead.</p>
<p>Great, now you have a bunch of stuff in a file that doesn't do anything! Let's
handle arguments and make it actually do things.</p>
<p>There are a lot of great libraries for parsing options, and I'll list a few of
them in the next blog post. For now, we'll just use <code>if</code> statements.</p>
<div class="highlight"><pre><span></span><span class="kd">let</span> <span class="nx">toWrite</span> <span class="c1">// this is what we&#39;ll end up writing to a file</span>
<span class="k">if</span> <span class="p">(</span><span class="nx">type</span> <span class="o">===</span> <span class="s1">&#39;function&#39;</span><span class="p">)</span> <span class="p">{</span>
  <span class="nx">toWrite</span> <span class="o">=</span> <span class="nx">pureComponent</span>
<span class="p">}</span>
<span class="k">if</span> <span class="p">(</span><span class="nx">type</span> <span class="o">===</span> <span class="s1">&#39;class&#39;</span><span class="p">)</span> <span class="p">{</span>
  <span class="nx">toWrite</span> <span class="o">=</span> <span class="nx">classComponent</span>
<span class="p">}</span>
<span class="k">if</span> <span class="p">(</span><span class="nx">type</span> <span class="o">!==</span> <span class="s1">&#39;function&#39;</span> <span class="o">&amp;&amp;</span> <span class="nx">type</span> <span class="o">!==</span> <span class="s1">&#39;class&#39;</span><span class="p">)</span> <span class="p">{</span>
  <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s1">&#39;please pass type of component as first argument&#39;</span><span class="p">)</span>
<span class="p">}</span>
</pre></div>

<p>That's a little sloppy&mdash;intentionally! I'm hoping you take some time to
write this out a little better than just copying and pasting from this blog
post.</p>
<p>There's one major bit left: actually writing a file. We'll need Node's <code>fs</code> for
this.</p>
<div class="highlight"><pre><span></span><span class="kr">const</span> <span class="p">{</span> <span class="nx">writeFile</span> <span class="p">}</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s1">&#39;fs&#39;</span><span class="p">)</span>
</pre></div>

<p>Now, at the bottom of our file, let's actually do the fun bit.</p>
<div class="highlight"><pre><span></span><span class="nx">writeFile</span><span class="p">(</span><span class="sb">`</span><span class="si">${</span><span class="nx">component</span><span class="si">}</span><span class="sb">.js`</span><span class="p">,</span> <span class="nx">toWrite</span><span class="p">,</span> <span class="s1">&#39;utf8&#39;</span><span class="p">,</span> <span class="nx">err</span> <span class="p">=&gt;</span> <span class="p">{</span>
  <span class="k">if</span> <span class="p">(</span><span class="nx">err</span><span class="p">)</span> <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">err</span><span class="p">)</span>
<span class="p">})</span>
</pre></div>

<p>Now your whole file should look something like this:</p>
<div class="highlight"><pre><span></span><span class="ch">#!/usr/bin/env node</span>

<span class="kr">const</span> <span class="nx">args</span> <span class="o">=</span> <span class="nx">process</span><span class="p">.</span><span class="nx">argv</span><span class="p">.</span><span class="nx">slice</span><span class="p">(</span><span class="mi">2</span><span class="p">)</span>
<span class="kr">const</span> <span class="nx">type</span> <span class="o">=</span> <span class="nx">args</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
<span class="kr">const</span> <span class="nx">component</span> <span class="o">=</span> <span class="nx">args</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span>
<span class="kr">const</span> <span class="p">{</span> <span class="nx">writeFile</span> <span class="p">}</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s1">&#39;fs&#39;</span><span class="p">)</span>

<span class="kr">const</span> <span class="nx">pureComponent</span> <span class="o">=</span> <span class="sb">`</span>
<span class="sb">import React from &#39;react&#39;</span>

<span class="sb">const </span><span class="si">${</span><span class="nx">component</span><span class="si">}</span><span class="sb"> = () =&gt; &lt;div&gt;</span><span class="si">${</span><span class="nx">component</span><span class="si">}</span><span class="sb">&lt;/div&gt;</span>

<span class="sb">export default </span><span class="si">${</span><span class="nx">component</span><span class="si">}</span><span class="sb"></span>
<span class="sb">`</span>

<span class="kr">const</span> <span class="nx">classComponent</span> <span class="o">=</span> <span class="sb">`</span>
<span class="sb">import React, { Component } from &#39;react&#39;</span>

<span class="sb">export default class </span><span class="si">${</span><span class="nx">component</span><span class="si">}</span><span class="sb"> extends Component {</span>
<span class="sb">  render() {</span>
<span class="sb">    return (</span>
<span class="sb">      &lt;div&gt;</span><span class="si">${</span><span class="nx">component</span><span class="si">}</span><span class="sb">&lt;/div&gt;</span>
<span class="sb">    )</span>
<span class="sb">  }</span>
<span class="sb">}</span>
<span class="sb">`</span>

<span class="kd">let</span> <span class="nx">toWrite</span>
<span class="k">if</span> <span class="p">(</span><span class="nx">type</span> <span class="o">===</span> <span class="s1">&#39;function&#39;</span><span class="p">)</span> <span class="p">{</span>
  <span class="nx">toWrite</span> <span class="o">=</span> <span class="nx">pureComponent</span>
<span class="p">}</span>
<span class="k">if</span> <span class="p">(</span><span class="nx">type</span> <span class="o">===</span> <span class="s1">&#39;class&#39;</span><span class="p">)</span> <span class="p">{</span>
  <span class="nx">toWrite</span> <span class="o">=</span> <span class="nx">classComponent</span>
<span class="p">}</span>
<span class="k">if</span> <span class="p">(</span><span class="nx">type</span> <span class="o">!==</span> <span class="s1">&#39;function&#39;</span> <span class="o">&amp;&amp;</span> <span class="nx">type</span> <span class="o">!==</span> <span class="s1">&#39;class&#39;</span><span class="p">)</span> <span class="p">{</span>
  <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s1">&#39;please pass type of component as first argument&#39;</span><span class="p">)</span>
<span class="p">}</span>

<span class="nx">writeFile</span><span class="p">(</span><span class="sb">`</span><span class="si">${</span><span class="nx">component</span><span class="si">}</span><span class="sb">.js`</span><span class="p">,</span> <span class="nx">toWrite</span><span class="p">,</span> <span class="s1">&#39;utf8&#39;</span><span class="p">,</span> <span class="nx">err</span> <span class="p">=&gt;</span> <span class="p">{</span>
  <span class="k">if</span> <span class="p">(</span><span class="nx">err</span><span class="p">)</span> <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">err</span><span class="p">)</span>
<span class="p">})</span>
</pre></div>

<p>Boom! You've made a command-line app! You can drop this anywhere in your
<code>$PATH</code> and call it from anywhere to generate a component for you! (<code>$PATH</code> is
where your system looks for files to execute. If you don't have something like
a <code>~/bin</code> directory, maybe <code>mv rcg.js /usr/local/bin</code>. If you don't want to
move it somewhere like that, you can always either do <code>./rcg.js</code> or <code>node
rcg</code>.)</p>
<p>That's it! This script is not super clean. There are a few little things that
can be done to make it a lot better, like using a <code>switch</code> statement to handle
arguments, handling unexpected arguments, not overwritting an existing file,
passing more options, and trimming extra lines from the generated files, and
not keeping your templates in the same file as all the rest of the things. I'm
going to leave that up to you. Have fun with it!</p>
<p>If you're interested in doing this kind of stuff in Node, be sure to check
back! I've got two more tutorials on writing command-line apps in Node, which
will go progressively more in depth, on the way</p>
    </div>
    <footer>
  <a href="/">Zac Anger</a>
  &middot; <a href="https://github.com/zacanger/zacanger.github.io">Source</a>
</footer>
  </body>
</html>