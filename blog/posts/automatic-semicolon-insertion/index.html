<!DOCTYPE html><html lang="en"><head><meta charSet="utf-8"/><link rel="shortcut icon" type="image/x-icon" href="/favicon.ico"/><title>Automatic Semicolon Insertion | Zac Anger&#x27;s Blog</title><meta name="description" content="This is a simplified version of the section from the spec that deals with ASI, because I&#x27;m really tired of all the idiocy and debate about this. It&#x27;s not a big deal whether you use semicolons everywhere or don&#x27;t, but the vitriol from those who use them everywhere really needs to end, and from what I can tell it&#x27;s almost entirely based on this idea that ASI is complicated. ASI is really simple, and its rules are a lot easier to remember than stupidity like ++foo vs foo++, or the rules for this. The actual spec&#x27;s ASI section is less than two pages, but it can be simplified further, into probably less than a page."/><meta name="author" content="Zac Anger"/><meta name="keywords" content="blog,design,javascript,js,music,programming,vim,web development,writing,js,asi,semicolons,rant"/><meta name="viewport" content="width=device-width, initial-scale=1"/><meta name="twitter:card" content="summary"/><meta name="twitter:site" content="@zacanger"/><meta name="twitter:creator" content="@zacanger"/><meta name="twitter:title" content="Automatic Semicolon Insertion"/><meta name="twitter:description" content="This is a simplified version of the section from the spec that deals with ASI, because I&#x27;m really tired of all the idiocy and debate about this. It&#x27;s not a big deal whether you use semicolons everywhere or don&#x27;t, but the vitriol from those who use them everywhere really needs to end, and from what I can tell it&#x27;s almost entirely based on this idea that ASI is complicated. ASI is really simple, and its rules are a lot easier to remember than stupidity like ++foo vs foo++, or the rules for this. The actual spec&#x27;s ASI section is less than two pages, but it can be simplified further, into probably less than a page."/><meta name="twitter:image" content="http://zacanger.com/logo.png"/><meta property="og:type" content="article"/><meta property="og:title" content="Automatic Semicolon Insertion"/><meta property="og:description" content="This is a simplified version of the section from the spec that deals with ASI, because I&#x27;m really tired of all the idiocy and debate about this. It&#x27;s not a big deal whether you use semicolons everywhere or don&#x27;t, but the vitriol from those who use them everywhere really needs to end, and from what I can tell it&#x27;s almost entirely based on this idea that ASI is complicated. ASI is really simple, and its rules are a lot easier to remember than stupidity like ++foo vs foo++, or the rules for this. The actual spec&#x27;s ASI section is less than two pages, but it can be simplified further, into probably less than a page."/><meta property="og:site_name" content="http://zacanger.com/blog"/><meta property="og:image" content="http://zacanger.com/logo.png"/><script type="text/javascript" href="/blog/assets/highlight.pack.js"></script><link rel="stylesheet" type="text/css" href="/blog/assets/styles.css"/><link rel="stylesheet" type="text/css" href="/blog/assets/github-gist.css"/></head><body><header><h1><a href="/blog">Zac Anger&#x27;s Blog</a></h1><h2>Automatic Semicolon Insertion</h2><div>13 December, 2015</div></header><div><div><p>This is a simplified version of the <a href="http://www.ecma-international.org/ecma-262/5.1/#sec-7.9">section from the spec that deals with ASI</a>, because I'm really tired of all the idiocy and debate about this. It's not a big deal whether you use semicolons everywhere or don't, but the vitriol from those who use them everywhere really needs to end, and from what I can tell it's almost entirely based on this idea that ASI is complicated. ASI is <em>really simple</em>, and its rules are a lot easier to remember than stupidity like <code>++foo</code> vs <code>foo++</code>, or the rules for <code>this</code>. The actual spec's ASI section is less than two pages, but it can be simplified further, into probably less than a page.</p>
<hr>
<h2>Automatic Semicolon Insertion</h2>
<p>ECMAScript statements are really really basic, and if you don't know what a statement is, you probably shouldn't be programming. A lot of statements in JavaScript (the popular implementation of the ECMAScript standard) are terminated by semicolons. These are:</p>
<ul>
<li>empty statement</li>
<li>variable statement</li>
<li>expression statement</li>
<li>do-while statement</li>
<li>continue statement</li>
<li>break statement</li>
<li>throw statement</li>
<li>return statement</li>
</ul>
<p>Semicolons don't need to be included in the source while writing these, though. Why not? Because when they're parsed, semicolons are automatically inserted. Why is this okay? Because new lines (what the spec calls a 'LineTerminator') also end statements, except in a few cases:</p>
<ol>
<li>The next line starts with one of the following characters: <code>[ ( + * / - , .</code></li>
<li>The next line starts by incrementing or decrementing a token</li>
<li>You're in a <code>for()</code>, <code>while()</code>, <code>do</code>, <code>if()</code>, or <code>else</code>, and there's no <code>}</code></li>
<li>The statement has an unclosed paren or ends in some other invalid way (like a <code>.</code> or <code>,</code>)</li>
</ol>
<p>Let's talk about that for a second.</p>
<p>Exception number four is pretty obvious, and no one has a problem with that.</p>
<p>Exception number three is also pretty obvious, because you're talking about being in a block. Not rocket science.</p>
<p>Exception number three:<br>
If you're writing something like this, you need some mental help:</p>
<pre><code class="hljs">i
++
j
</code></pre>
<p>ASI would turn that into:</p>
<pre><code class="hljs">i;
++j;
</code></pre>
<p>But guess what? No rational human being would write code like that, so it's not a problem. Right? Right.</p>
<p>It's the first thing that people worry about, really. Which is why we like to do semicolons at the beginning of those lines. It turns out it's a lot quicker and easier to remember than people think. Don't write your code like a jackass (it's not concrete poetry, dummy), and put a semicolon at the beginning of a line if it starts with <code>[</code> or <code>(</code>. And it turns out it's a lot easier to read, too (comma-first is another entire discussion, but what it comes down to is that comma-first is much, much easier to read and write, so it doesn't really make much sense not to do it).</p>
<p>There's also that other thing where ASI could totally break your code, and that goes back to the &quot;Don't write code like a jackass (it's not concrete poetry)&quot; bit. Imagine you're a tool, so you write:</p>
<pre><code class="hljs">function foo(bar){
  return
    bar
}
</code></pre>
<p>Well, for starters, you're weird. And ASI will do this: <code>function foo(bar){ return; bar; };</code>. It turns out there's a really super easy way around that problem, and it's something all people do anyway because they're not horrible human beings: don't put random newlines in your code. <code>return</code> is <em>always</em> terminated by a newline (as mentioned above), so everyone's already aware of this. That was easy. Same goes for <code>break</code>, <code>continue</code>, and <code>throw</code>.</p>
<p>The idea that putting semicolons everywhere is somehow more readable or safe makes very little sense. I could put semicolons all over the place, and it makes no difference.</p>
<pre><code class="hljs">function foo(){;;;;;;;;;;;
;;var bar = 'semicolons';;
;;console.log(bar);;;;;;;;
};;;;;;;;;;;;;;;;;;;;;;;;;
;;;;;;;;;;;;;;;;;;;foo();;
</code></pre>
<p>Try running that in your browser console, or Node. Try running this one:</p>
<pre><code class="hljs">function foo(){
  var bar = 'no semicolons'
  console.log(bar)
}
foo()
</code></pre>
<p>See any difference?</p>
<p>ASI's not a new thing (it's older than a lot of people writing JavaScript these days, actually). It's not scary, it's not unreliable, and it definitely doesn't cause <a href="https://google.github.io/styleguide/javascriptguide.xml?showone=Semicolons#Semicolons">subtle, hard to debug problems</a>, as long as you don't write code like a jackass.</p>
<p>I'm basically done here. I still definitely recommend <a href="http://www.ecma-international.org/ecma-262/5.1/#sec-7.9">actually reading this</a>, both because it's a bit more verbose and because it's extraordinarily comprehensible. But if technical literature's not your style, then maybe check <a href="http://inimino.org/~inimino/blog/javascript_semicolons">one of</a> <a href="http://mislav.net/2010/05/semicolons/">the big</a> <a href="http://blog.izs.me/post/2353458699/an-open-letter-to-javascript-leaders-regarding">blog posts</a> from smarter people than myself on the topic.</p>
<h2>TL;DR</h2>
<p>The TL;DR here is that no one actually gives a shit how you write code in the privacy of your cubicle, as long as it conforms to the styleguide of the project you're working on. But the nastiness directed towards people who don't use semicolons really has to end. The rules are stupid-simple, nearly impossible to fuck up, and taking five minutes to get in the habit of writing code this way actually does make things more readable. If you love your semicolons, good for you. But don't ever tell someone their style is 'wrong' or 'dangerous' or prone to breakage just because they spent an extra five minutes to read two pages of the language specification. And don't be afraid of learning the rules yourself. It's really actually incredibly simple.</p>
</div><p><a href="https://github.com/zacanger/dotcom/issues/new?title=Automatic Semicolon Insertion" target="_blank">Submit a bug report</a></p></div><footer>Made by <a href="/">Zac Anger</a><br/><br/><a href="/blog/rss.xml">Feed</a> · <a href="/LICENSE.txt">License</a> · <a href="https://github.com/zacanger">GitHub</a> · <a href="https://twitter.com/zacanger">Twitter</a> · <a href="https://mastodon.social/@zacanger">Mastodon</a></footer></body></html>