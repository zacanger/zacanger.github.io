<!doctype html>
<html lang="en">
<head>
  <meta http-equiv="Content-Type" content="text/html" charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">

  <title>zac anger - angr</title>
  <meta name="description" content="JS Dev, Nix Hacker, Musician">
  <meta name="author" content="Zac Anger">
  <meta name="keywords" content="blog, javascript, js, programming, web development, design, music">
  <meta name="distribution" content="Global">
  <meta name="revisit-after" content="10 Days">
  <meta name="rating" content="General">
  <meta name="refresh" content="10 Days">

  <meta name="HandheldFriendly" content="True">
  <meta name="MobileOptimized" content="320">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">

  <link rel="stylesheet" type="text/css" href="/assets/css/highlight/styles/tomorrow-night-eighties.css">
  <link rel="stylesheet" type="text/css" href="/assets/css/hack/css/hack-extended.min.css">
  <script type="text/javascript" src="/assets/css/highlight/highlight.pack.js"></script>

  <link rel="stylesheet" type="text/css" href="/assets/css/screen.css">

  <meta name="generator" content="Ghost ?" />
<link rel="alternate" type="application/rss+xml" title="angr" href="/rss/index.xml">
<link rel="canonical" href="http://blog.zacanger.com/2017/wtf-is-set.html" />
</head>
<body class="author-template author-blog post-template tag-js tag-es2015 tag-set">
  <div id="content">
    <div id="content-left">
      <div class="vertical">
        <div class="blog-title-wrap">
        <a id="blog-logo" href="http://blog.zacanger.com"><img src="http://zacanger.com/logo.svg" alt="Blog Logo"></a>
        <h1 class="blog-title"><a href="http://blog.zacanger.com">angr</a></h1>
        </div>
        <div class="blog-description-wrap">
        <h2 class="blog-description">writings from zac anger</h2>
        <h2 class="blog-description"><a href="http://zacanger.com/blog">old blog</a></h2>
        </div>
    </div>
    </div>

    
<div id="content-main">

  <article class="post tag-js tag-es2015 tag-set">


    <h2 class="post-title"><a href="/2017/wtf-is-set.html">WTF is Set?</a></h2>
    <span class="post-meta">
      <time datetime="2017-04-25">25 April, 2017</time>
       | tags: <a href="/tag/js/">js</a>, <a href="/tag/es2015/">es2015</a>, <a href="/tag/set/">set</a></span>

    <br>

    <section class="post-content">
      <h1 id="wtf-is-set-">WTF is Set?</h1>
<p>Please excuse the funky syntax highlighting in this post. Apparently
the thing my blog uses for that doesn&#39;t know what to do about template strings.</p>
<p>So, someone asked in a Slack channel how they might clean up the following code:</p>
<pre class="hljs"><code>getNames (contacts) {
  <span class="hljs-built_in">let</span> contacts_<span class="hljs-built_in">set</span> = []

  contacts.forEach((contact) =&gt; {
    <span class="hljs-built_in">let</span> firstName = get(contact, <span class="hljs-string">&#39;contactInfo.firstName&#39;</span>)
    <span class="hljs-built_in">let</span> lastName  = get(contact, <span class="hljs-string">&#39;contactInfo.lastName&#39;</span>)
    <span class="hljs-built_in">let</span> fullName = `<span class="hljs-variable">${firstName}</span> <span class="hljs-variable">${lastName}</span>`

    <span class="hljs-keyword">if</span> (contacts_set.includes(fullName)) {
      <span class="hljs-built_in">return</span>
    } <span class="hljs-keyword">else</span> {
      contacts_set.push(fullName)
    }

    <span class="hljs-built_in">set</span>(this, <span class="hljs-string">&#39;contactsSet&#39;</span>, contactsSet)
  })
}</code></pre><p>Note that the <code>get</code> and <code>set</code> going on here seemed to be Ember-specific. I don&#39;t
know Ember so don&#39;t ask me.</p>
<p>And I said, how about this?</p>
<pre class="hljs"><code><span class="hljs-attribute">getNames</span>: <span class="hljs-function"><span class="hljs-params">(contacts)</span> =&gt;</span>
  [...<span class="hljs-keyword">new</span> Set(
    contacts.map(<span class="hljs-function"><span class="hljs-params">({ contactInfo: { firstName, lastName }})</span> =&gt;</span>
      `<span class="javascript">${firstName} ${lastName}</span>`))]</code></pre><p>I like this version because it&#39;s very concise and still readable (to me).
It also doesn&#39;t do mutation-y stuff, which is a good thing.</p>
<p>And then someone else asked:</p>
<blockquote>
<p>Can some one eli5 what <code>Set</code> is that&#39;s referenced above?</p>
</blockquote>
<p>Which made me realise that a lot of folks still aren&#39;t using a lot of the nice
new things from ES2015, so I explained a bit. Here&#39;s how I understand it.</p>
<p>Set is a new (in ES2015) iterable builtin (like Array, String, TypedArray). Map
is also new in 2015. Set is to Array as Map is to Object, kinda.</p>
<p>For practical usage Set is basically Array but unique, and with different
methods. <code>add</code>, <code>has</code>, <code>delete</code>, <code>size</code>, and some others. There&#39;s a lot more
info <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Set">on MDN</a>.</p>
<p>You can pass <code>Set</code> an iterable, which is why the thing I have above works
(because thing inside <code>new Set()</code> results in an array).</p>
<p>In that case <code>Set</code> isn&#39;t being used for too much besides just the fact that it&#39;s
<code>Set</code> (so it only holds unique values). Someone else pointed out in the same
channel that maybe it&#39;s not the best idea if you have a lot of values, because
then you&#39;re creating another thing, which is totally true.</p>
<p>There&#39;s a bit more background
<a href="https://en.wikipedia.org/wiki/Set_(mathematics">here</a>) on what JS&#39;s <code>Set</code> is
suppose to be kind of like.</p>
<p>And underneath it sorta looks vaguely like this:</p>
<pre class="hljs"><code><span class="hljs-keyword">class</span> Set {
  <span class="hljs-constructor"><span class="hljs-keyword">constructor</span> () </span>{
    <span class="hljs-keyword">this</span>.storage = []
  }
  add (a) {
    <span class="hljs-keyword">if</span> (!<span class="hljs-keyword">this</span>.storage.includes(a)) {
      <span class="hljs-keyword">this</span>.storage.push(a)
    }
  }
  has (a) {
    <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>.storage.includes(a)
  }
  remove (a) {
    <span class="hljs-keyword">this</span>.storage.splice(<span class="hljs-keyword">this</span>.storage.indexOf(a), <span class="hljs-number">1</span>)
  }
}</code></pre><p>That&#39;s a lot of stuff, but mostly you can think of <code>Set</code> as a thing that&#39;s like
<code>Array</code> but it only holds unique things.</p>
<p>There&#39;s also a <code>WeakSet</code> which can only hold objects. I haven&#39;t really found a
valid use case for <code>WeakSet</code> and <code>WeakMap</code> yet, personally.</p>
<p><code>Set</code> turns out to be pretty useful. I&#39;ve used it a few times <a href="https://jane.com">at
work</a> (with appropriate polyfills) without any problems, and I
use it in a few places in <a href="https://github.com/zacanger/zeelib">zeelib</a>, my
sort-of-sometimes-popular utility library. Definitely play around with it!</p>

    </section>

    <footer class="post-footer">

      <section class="share">
        <a
          class="icon-twitter"
          href="http://twitter.com/share?text=WTF is Set?&url=http://blog.zacanger.com/2017/wtf-is-set.html"
          title="Tweet this post."
          onclick="window.open(this.href, 'twitter-share', 'width=550,height=235');return false;">
          <span class="hidden">Twitter</span>
        </a>
      </section>

    </footer>


  </article>

</div>


    <footer class="site-footer">
      <a class="subscribe icon-feed" href="http://blog.zacanger.com/rss/index.xml"><span class="tooltip">Subscribe!</span></a>
      <div class="">
        <section class="copyright">content by <a href="http://zacanger.com">zac anger</a>.</section>
        <section class="poweredby">
          <a href="http://zacanger.com/LICENSE.txt">under the WTFPL</a> &middot;
          <a href="https://twitter.com/@zacanger">twitter</a> &middot;
          <a href="https://github.com/zacanger">github</a>
        </section>
      </div>
    </footer>

    <script src="/assets/js/jquery.min.js"></script>

    <script src="https://widget.battleforthenet.com/widget.js" async></script>
    <script type="text/javascript" src="/assets/js/index.js"></script>

  </div>
</body>
</html>
