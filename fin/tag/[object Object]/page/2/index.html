<!doctype html>
<html lang="en">
<head>
  <meta http-equiv="Content-Type" content="text/html" charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">

  <title>js - Page 2 - angr</title>
  <meta name="description" content="">
  <meta name="author" content="Zac Anger">
  <meta name="keywords" content="blog, javascript, js, programming, web development, design, music">
  <meta name="distribution" content="Global">
  <meta name="revisit-after" content="10 Days">
  <meta name="rating" content="General">
  <meta name="refresh" content="10 Days">

  <meta name="HandheldFriendly" content="True">
  <meta name="MobileOptimized" content="320">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">

  <link rel="stylesheet" type="text/css" href="/assets/css/highlight/styles/tomorrow-night-eighties.css">
  <link rel="stylesheet" type="text/css" href="/assets/css/hack/css/hack-extended.min.css">
  <script type="text/javascript" src="/assets/css/highlight/highlight.pack.js"></script>

  <link rel="stylesheet" type="text/css" href="/assets/css/screen.css">

  <meta name="generator" content="Ghost ?" />
<link rel="alternate" type="application/rss+xml" title="angr" href="/rss/index.xml">
<link rel="canonical" href="http://blog.zacanger.com/tag/[object Object]/page/2/index.html" />
<link rel="prev" href="http://blog.zacanger.com//tag/[object Object]/" />
<link rel="next" href="http://blog.zacanger.com//tag/[object Object]/page/3/" />
</head>
<body class="tag-template tag-js paged archive-template">
  <div id="content">
    <div id="content-left">
      <div class="vertical">
        <div class="blog-title-wrap">
        <a id="blog-logo" href="http://blog.zacanger.com"><img src="http://zacanger.com/logo.svg" alt="Blog Logo"></a>
        <h1 class="blog-title"><a href="http://blog.zacanger.com">angr</a></h1>
        </div>
        <div class="blog-description-wrap">
        <h2 class="blog-description">writings from zac anger</h2>
        <h2 class="blog-description"><a href="http://zacanger.com/blog">old blog</a></h2>
        </div>
    </div>
    </div>

    
<div id="content-main">


  <article class="post tag-bookmarklets tag-js">
    <header class="post-header">
      <h2 class="post-title"><a href="/2016/bookmarklets.html">bookmarklets</a></h2>
      <span class="post-meta">
        <time datetime="2016-05-29">29 May, 2016</time>
         | tags: <a href="/tag/bookmarklets/">bookmarklets</a>, <a href="/tag/js/">js</a></span>

      <br>

    </header>
    <section class="post-content">
      <p><p>I want to take one short blogs post just to share my bookmarklets.</p>
<p>If you don&#39;t know what that means, don&#39;t worry.</p>
<p>There once was a time when browser extensions/add-ons didn&#39;t exist, and a
slightly later time when they did exist but still really sucked. And, I mean,
you can still get a lot more out of arbitrary JS than you can out of an
extension, usually.</p>
<p>Bookmarklets are little bits of JS saved as a bookmark. When you click or
navigate to that bookmark, the browser just executes it. You can do some pretty
nifty things with them. I have <a href="https://pinboard.in/u:zacanger">45748 bookmarks saved on Pinboard</a>,
and the only bookmarks I have in my browsers are little snippets of JavaScript.</p>
<p>I&#39;m not going to post all of them here (I have about 150), just some of the most
useful ones.</p>
<p>You can save any bit of JS you&#39;d like as a bookmark. Just prepend <code>javascript:</code>
to some code, as in <code>javascript:console.log(&#39;foo&#39;);alert(&#39;bar&#39;);</code>.</p>
<hr>
<p>a little text editor thing</p>
<pre class="hljs"><code>data:text/html, &lt;title&gt;pad&lt;<span class="hljs-variable">%2Ftitle</span>&gt; &lt;<span class="hljs-keyword">link</span> href<span class="hljs-variable">%3D</span><span class="hljs-string">&#39;http%3A%2F%2Ffonts.googleapis.com%2Fcss%3Ffamily%3DSource%2BCode%2BPro%3A400%2C700&#39;</span> rel<span class="hljs-variable">%3D</span><span class="hljs-string">&#39;stylesheet&#39;</span> type<span class="hljs-variable">%3D</span><span class="hljs-string">&#39;text%2Fcss&#39;</span>&gt; &lt;body contenteditable style<span class="hljs-variable">%3D</span><span class="hljs-string">&quot; background-color<span class="hljs-variable">%3A</span> <span class="hljs-variable">%2335322f</span><span class="hljs-variable">%3B</span> color<span class="hljs-variable">%3A</span> <span class="hljs-variable">%23cbc5c1</span><span class="hljs-variable">%3B</span> font-family<span class="hljs-variable">%3A</span> &#39;Source Code Pro&#39;<span class="hljs-variable">%2C</span> monospace<span class="hljs-variable">%3B</span> font-size<span class="hljs-variable">%3A</span> 1.5em<span class="hljs-variable">%3B</span> line-height<span class="hljs-variable">%3A</span> 1.5<span class="hljs-variable">%3B</span> max-width<span class="hljs-variable">%3A</span> 28em<span class="hljs-variable">%3B</span> margin<span class="hljs-variable">%3A</span> 0 auto<span class="hljs-variable">%3B</span> padding<span class="hljs-variable">%3A</span> 4em 1.3em<span class="hljs-variable">%3B</span> -webkit-font-smoothing<span class="hljs-variable">%3A</span> antialiased<span class="hljs-variable">%3B</span> &quot;</span> spellcheck<span class="hljs-variable">%3D</span><span class="hljs-string">&quot;false&quot;</span>&gt; &lt;h1 style<span class="hljs-variable">%3D</span><span class="hljs-string">&quot;line-height<span class="hljs-variable">%3A</span> 1.2<span class="hljs-variable">%3B</span>&quot;</span>&gt;pad&lt;<span class="hljs-variable">%2Fh1</span>&gt; &lt;p&gt;<span class="hljs-keyword">write</span> stuff here&lt;br <span class="hljs-variable">%2F</span>&gt;<span class="hljs-keyword">do</span> it</code></pre><p>element outliner (helps when doing css)</p>
<pre class="hljs"><code>javascrip<span class="hljs-variable">t:</span>[].forEach.<span class="hljs-built_in">call</span>(document.querySelectorAll(<span class="hljs-string">&#39;<em>&#39;</span>),<span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(a)</span>{<span class="hljs-title">a</span>.<span class="hljs-title">style</span>.<span class="hljs-title">outline</span>=&#39;1<span class="hljs-title">px</span> <span class="hljs-title">solid</span> #&#39;+<span class="hljs-params">(~~(Math.random()</span></em><span class="hljs-params">(1&lt;&lt;24)</span>)).<span class="hljs-title">toString</span><span class="hljs-params">(16)</span>})</span></code></pre><p>switch to view-source (same as ctrl-u in chromium)</p>
<pre class="hljs"><code><span class="hljs-string">javascript:</span>location=<span class="hljs-string">&#39;<a href="http://viewsource.in/">http://viewsource.in/</a>&#39;</span>+location</code></pre><p>view rendered html on github that isn&#39;t in a gh-pages branch</p>
<pre class="hljs"><code>javascript:<span class="hljs-keyword">void</span>(<span class="hljs-string">&#39;<a href="http://htmlpreview.github.io/">http://htmlpreview.github.io/</a>&#39;</span>==<span class="hljs-built_in">window</span>.location?alert(<span class="hljs-string">&#39;Drag me to your bookmarks bar!&#39;</span>):<span class="hljs-built_in">window</span>.location=<span class="hljs-string">&#39;<a href="http://htmlpreview.github.io/?">http://htmlpreview.github.io/?</a>&#39;</span>+<span class="hljs-built_in">window</span>.location)</code></pre><p>switch from github to the gh-pages (foo.github.io) page</p>
<pre class="hljs"><code>javascript:(function()<span class="hljs-variable">%20</span>{<span class="hljs-variable">%20var</span><span class="hljs-variable">%20host</span><span class="hljs-variable">%20</span>=<span class="hljs-variable">%20location</span>.host.<span class="hljs-keyword">split</span>(<span class="hljs-string">&#39;.&#39;</span>);<span class="hljs-variable">%20var</span><span class="hljs-variable">%20path</span><span class="hljs-variable">%20</span>=<span class="hljs-variable">%20location</span>.pathname.slice(<span class="hljs-number">1</span>).<span class="hljs-keyword">split</span>(<span class="hljs-string">&#39;/&#39;</span>);<span class="hljs-variable">%20window</span>.location<span class="hljs-variable">%20</span>=<span class="hljs-variable">%20host</span>[<span class="hljs-number">2</span>]<span class="hljs-variable">%20</span>===<span class="hljs-variable">%20</span><span class="hljs-string">&#39;io&#39;</span><span class="hljs-variable">%20</span>?<span class="hljs-variable">%20</span><span class="hljs-string">&#39;<a href="https://github.com/">https://github.com/</a>&#39;</span><span class="hljs-variable">%20</span>+<span class="hljs-variable">%20host</span>[<span class="hljs-number">0</span>]<span class="hljs-variable">%20</span>+<span class="hljs-variable">%20</span><span class="hljs-string">&#39;/&#39;</span><span class="hljs-variable">%20</span>+<span class="hljs-variable">%20path</span>[<span class="hljs-number">0</span>]<span class="hljs-variable">%20</span>:<span class="hljs-variable">%20</span><span class="hljs-string">&#39;http://&#39;</span><span class="hljs-variable">%20</span>+<span class="hljs-variable">%20path</span>[<span class="hljs-number">0</span>]<span class="hljs-variable">%20</span>+<span class="hljs-variable">%20</span><span class="hljs-string">&#39;.github.io/&#39;</span><span class="hljs-variable">%20</span>+<span class="hljs-variable">%20path</span>[<span class="hljs-number">1</span>];<span class="hljs-variable">%20</span>})();</code></pre><p>go to referrer (where you just came from)</p>
<pre class="hljs"><code>javascript:<span class="hljs-keyword">if</span>(!<span class="hljs-built_in">document</span>.referrer) alert(<span class="hljs-string">&quot;No referrer!&quot;</span>); <span class="hljs-keyword">else</span> <span class="hljs-built_in">document</span>.location = <span class="hljs-built_in">document</span>.referrer; <span class="hljs-keyword">void</span> <span class="hljs-number">0</span></code></pre><p>view current page as markdown</p>
<pre class="hljs"><code><span class="hljs-keyword">javascript</span>:(function()<span class="hljs-number">%7</span>Bfunction<span class="hljs-number">%20</span>callback()<span class="hljs-number">%7</span>B(function(<span class="hljs-number">%24</span>)<span class="hljs-number">%7</span>Bvar<span class="hljs-number">%20</span>jQuery<span class="hljs-number">%3</span>D<span class="hljs-number">%24</span><span class="hljs-number">%3</span>B<span class="hljs-number">%24</span>(&#39;link<span class="hljs-number">%5</span>Brel<span class="hljs-number">%3</span>Dstylesheet<span class="hljs-number">%5</span>D&#39;).add(&#39;style&#39;).remove()<span class="hljs-number">%3</span>B<span class="hljs-number">%24</span>(&#39;<span class="hljs-number">%5</span>Bstyle<span class="hljs-number">%5</span>D&#39;).attr(&#39;style&#39;<span class="hljs-number">%2</span>C<span class="hljs-number">%20</span>&#39;&#39;)<span class="hljs-number">%3</span>B<span class="hljs-number">%24</span>(&#39;head&#39;).append(&#39;<span class="hljs-number">%3</span>Clink<span class="hljs-number">%20</span>rel<span class="hljs-number">%3</span>D<span class="hljs-number">%22</span>stylesheet<span class="hljs-number">%22</span><span class="hljs-number">%20</span>href<span class="hljs-number">%3</span>D<span class="hljs-number">%22</span>http<span class="hljs-number">%3</span>A<span class="hljs-number">%2</span>F<span class="hljs-number">%2</span>Fmrcoles.com<span class="hljs-number">%2</span>Fmedia<span class="hljs-number">%2</span>Ftest<span class="hljs-number">%2</span>Fmarkdown-css<span class="hljs-number">%2</span>Fmarkdown.css<span class="hljs-number">%22</span><span class="hljs-number">%20</span>type<span class="hljs-number">%3</span>D<span class="hljs-number">%22</span>text<span class="hljs-number">%2</span>Fcss<span class="hljs-number">%22</span><span class="hljs-number">%20</span><span class="hljs-number">%2</span>F<span class="hljs-number">%3</span>E&#39;)<span class="hljs-number">%3</span>B<span class="hljs-number">%24</span>(&#39;body&#39;).addClass(&#39;markdown&#39;).css(<span class="hljs-number">%7</span>Bwidth<span class="hljs-number">%3</span>A<span class="hljs-number">%20</span>&#39;600px&#39;<span class="hljs-number">%2</span>C<span class="hljs-number">%20</span>margin<span class="hljs-number">%3</span>A<span class="hljs-number">%20</span>&#39;2em<span class="hljs-number">%20</span>auto&#39;<span class="hljs-number">%2</span>C<span class="hljs-number">%20</span>&#39;word-wrap&#39;<span class="hljs-number">%3</span>A<span class="hljs-number">%20</span>&#39;break-word&#39;<span class="hljs-number">%7</span>D)<span class="hljs-number">%3</span>B<span class="hljs-number">%24</span>(&#39;a<span class="hljs-number">%20</span>img&#39;).css(<span class="hljs-number">%7</span>B&#39;max-height&#39;<span class="hljs-number">%3</span>A<span class="hljs-number">%20</span>&#39;1em&#39;<span class="hljs-number">%2</span>C<span class="hljs-number">%20</span>&#39;max-width&#39;<span class="hljs-number">%3</span>A<span class="hljs-number">%20</span>&#39;1em&#39;<span class="hljs-number">%7</span>D)<span class="hljs-number">%7</span>D)(jQuery.noConflict(true))<span class="hljs-number">%7</span>Dvar<span class="hljs-number">%20</span>s<span class="hljs-number">%3</span>Ddocument.createElement(<span class="hljs-number">%22</span>script<span class="hljs-number">%22</span>)<span class="hljs-number">%3</span>Bs.src<span class="hljs-number">%3</span>D<span class="hljs-number">%22</span>https<span class="hljs-number">%3</span>A<span class="hljs-number">%2</span>F<span class="hljs-number">%2</span>Fajax.googleapis.com<span class="hljs-number">%2</span>Fajax<span class="hljs-number">%2</span>Flibs<span class="hljs-number">%2</span>Fjquery<span class="hljs-number">%2</span>F1.7.1<span class="hljs-number">%2</span>Fjquery.min.js<span class="hljs-number">%22</span><span class="hljs-number">%3</span>Bif(s.addEventListener)<span class="hljs-number">%7</span>Bs.addEventListener(<span class="hljs-number">%22</span>load<span class="hljs-number">%22</span><span class="hljs-number">%2</span>Ccallback<span class="hljs-number">%2</span>Cfalse)<span class="hljs-number">%7</span>Delse<span class="hljs-number">%20</span>if(s.readyState)<span class="hljs-number">%7</span>Bs.onreadystatechange<span class="hljs-number">%3</span>Dcallback<span class="hljs-number">%7</span>Ddocument.body.appendChild(s)<span class="hljs-number">%3</span>B<span class="hljs-number">%7</span>D)()</code></pre><p>open an ace editor (javascript)</p>
<pre class="hljs"><code>data:text/html, <span class="hljs-tag">&lt;<span class="hljs-title">style</span> <span class="hljs-attribute">type</span>=<span class="hljs-value">&quot;text/css&quot;</span>&gt;</span><span class="css"><span class="hljs-id">#e</span><span class="hljs-rules">{<span class="hljs-rule"><span class="hljs-attribute">position</span>:<span class="hljs-value">absolute</span></span>;<span class="hljs-rule"><span class="hljs-attribute">top</span>:<span class="hljs-value"><span class="hljs-number">0</span></span></span>;<span class="hljs-rule"><span class="hljs-attribute">right</span>:<span class="hljs-value"><span class="hljs-number">0</span></span></span>;<span class="hljs-rule"><span class="hljs-attribute">bottom</span>:<span class="hljs-value"><span class="hljs-number">0</span></span></span>;<span class="hljs-rule"><span class="hljs-attribute">left</span>:<span class="hljs-value"><span class="hljs-number">0</span></span></span>;}</span></span><span class="hljs-tag">&lt;/<span class="hljs-title">style</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-title">div</span> <span class="hljs-attribute">id</span>=<span class="hljs-value">&quot;e&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-title">div</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-title">script</span> <span class="hljs-attribute">src</span>=<span class="hljs-value">&quot;<a href="http://ace.c9.io/build/src-noconflict/ace.js">http://ace.c9.io/build/src-noconflict/ace.js</a>&quot;</span> <span class="hljs-attribute">type</span>=<span class="hljs-value">&quot;text/javascript&quot;</span> <span class="hljs-attribute">charset</span>=<span class="hljs-value">&quot;utf-8&quot;</span>&gt;</span><span class="undefined"></span><span class="hljs-tag">&lt;/<span class="hljs-title">script</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-title">script</span> <span class="hljs-attribute">src</span>=<span class="hljs-value">&quot;<a href="http://ace.c9.io/build/src-noconflict/ext-language_tools.js">http://ace.c9.io/build/src-noconflict/ext-language_tools.js</a>&quot;</span> <span class="hljs-attribute">type</span>=<span class="hljs-value">&quot;text/javascript&quot;</span> <span class="hljs-attribute">charset</span>=<span class="hljs-value">&quot;utf-8&quot;</span>&gt;</span><span class="undefined"></span><span class="hljs-tag">&lt;/<span class="hljs-title">script</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-title">script</span>&gt;</span><span class="javascript"><span class="hljs-keyword">var</span> e=ace.edit(<span class="hljs-string">&quot;e&quot;</span>);e.setTheme(<span class="hljs-string">&quot;ace/theme/monokai&quot;</span>);e.setOptions({enableBasicAutocompletion:<span class="hljs-literal">true</span>});e.getSession().setMode(<span class="hljs-string">&quot;ace/mode/javascript&quot;</span>);addEventListener(<span class="hljs-string">&quot;keydown&quot;</span>,<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">evt</span>)</span>{<span class="hljs-keyword">if</span>(evt.ctrlKey &amp;&amp; evt.keyCode==<span class="hljs-number">13</span>) <span class="hljs-built_in">eval</span>(e.getSession().getValue());});<span class="hljs-keyword">var</span> link=<span class="hljs-built_in">document</span>.createElement(<span class="hljs-string">&quot;link&quot;</span>);link.type=<span class="hljs-string">&quot;image/x-icon&quot;</span>;link.rel=<span class="hljs-string">&quot;shortcut icon&quot;</span>;link.href=<span class="hljs-string">&quot;<a href="https://raw.githubusercontent.com/diegocard/diegocard.github.io/master/images/icon.png">https://raw.githubusercontent.com/diegocard/diegocard.github.io/master/images/icon.png</a>&quot;</span>;<span class="hljs-built_in">document</span>.getElementsByTagName(<span class="hljs-string">&quot;head&quot;</span>)[<span class="hljs-number">0</span>].appendChild(link);</span><span class="hljs-tag">&lt;/<span class="hljs-title">script</span>&gt;</span></code></pre><p>go up (eg from foo.bar/quux/baz.html to foo.bar/quux)</p>
<pre class="hljs"><code>javascript:(function(f,a,c,e,t,i,o,u,<span class="hljs-keyword">s</span>){a=f.href;c=f.pathname;e=a.<span class="hljs-keyword">split</span>(<span class="hljs-string">&#39;#&#39;</span>)[<span class="hljs-number">0</span>];t=e.<span class="hljs-keyword">split</span>(<span class="hljs-string">&#39;?&#39;</span>)[<span class="hljs-number">0</span>];i=f.host.<span class="hljs-keyword">split</span>(<span class="hljs-string">&#39;.&#39;</span>);o=i.<span class="hljs-keyword">length</span>==<span class="hljs-number">2</span>?<span class="hljs-string">&#39;www.&#39;</span>:<span class="hljs-string">&#39;&#39;</span>;u=i.slice(o==<span class="hljs-string">&#39;&#39;</span>&amp;&amp;isNaN((i.slice(-<span class="hljs-number">1</span>)+<span class="hljs-string">&#39;&#39;</span>).<span class="hljs-keyword">split</span>(<span class="hljs-string">&#39;:&#39;</span>)[<span class="hljs-number">0</span>])?<span class="hljs-number">1</span>:<span class="hljs-number">0</span>).<span class="hljs-keyword">join</span>(<span class="hljs-string">&#39;.&#39;</span>);<span class="hljs-keyword">s</span>=e!=a?e:t!=a?t:c.substring(<span class="hljs-number">0</span>,c.substring(<span class="hljs-number">0</span>,c.<span class="hljs-keyword">length</span>-<span class="hljs-number">1</span>).lastIndexOf(<span class="hljs-string">&#39;/&#39;</span>)+<span class="hljs-number">1</span>);f.href=<span class="hljs-keyword">s</span>?<span class="hljs-keyword">s</span>:f.protocol+<span class="hljs-string">&#39;//&#39;</span>+o+u})(top.location)</code></pre><p>check the current page on the internet archive</p>
<pre class="hljs"><code>javascript:<span class="hljs-keyword">void</span>((<span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">()</span></span>{location.href=%<span class="hljs-number">22</span>http:<span class="hljs-comment">//web.archive.org/web/*/%22+location.href;})())</span></code></pre><p>tiny little element inspector (useful on for example mobile browsers that don&#39;t
have devtools)</p>
<pre class="hljs"><code>javascript:(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">d</span>)</span>{<span class="hljs-keyword">var</span>%<span class="hljs-number">20</span>I=d.createElement(<span class="hljs-string">&#39;input&#39;</span>),S=I.style;I.type=<span class="hljs-string">&#39;text&#39;</span>;S.width=<span class="hljs-string">&#39;256px&#39;</span>;S.padding=<span class="hljs-string">&#39;2px&#39;</span>;S.border=<span class="hljs-string">&#39;4px%20solid%20#fff&#39;</span>;S.borderRadius=<span class="hljs-string">&#39;8px&#39;</span>;S.boxShadow=<span class="hljs-string">&#39;1px%201px%203px%201px%20rgba(0,0,0,0.7)&#39;</span>;S.background=<span class="hljs-string">&#39;#000&#39;</span>;S.color=<span class="hljs-string">&#39;#fff&#39;</span>;S.fontSize=<span class="hljs-string">&#39;13px&#39;</span>;S.textShadow=<span class="hljs-string">&#39;none&#39;</span>;S.position=<span class="hljs-string">&#39;fixed&#39;</span>;S.top=S.right=<span class="hljs-string">&#39;3px&#39;</span>;S.zIndex=<span class="hljs-string">&#39;999999&#39;</span>;d.body.appendChild(I);<span class="hljs-built_in">window</span>.addEventListener(<span class="hljs-string">&#39;mousemove&#39;</span>,<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">e</span>)</span>{<span class="hljs-keyword">var</span>%<span class="hljs-number">20</span>E=d.elementFromPoint(e.x,e.y);<span class="hljs-keyword">var</span>%<span class="hljs-number">20</span>A=[];A[<span class="hljs-number">0</span>]=E.tagName;<span class="hljs-keyword">if</span>(E.id){A[<span class="hljs-number">1</span>]=<span class="hljs-string">&#39;#&#39;</span>+E.id;}<span class="hljs-keyword">if</span>(E.className){A[<span class="hljs-number">2</span>]=<span class="hljs-string">&#39;.&#39;</span>+E.className.split(<span class="hljs-string">&#39;%20&#39;</span>).join(<span class="hljs-string">&#39;.&#39;</span>);}I.value=A.join(<span class="hljs-string">&#39;&#39;</span>);},<span class="hljs-literal">true</span>)})(<span class="hljs-built_in">document</span>);</code></pre><p>show password field text</p>
<pre class="hljs"><code>javascript:<span class="hljs-keyword">var</span>%20e=document.getElementsByTagName(&#39;<span class="hljs-keyword">input</span>&#39;);<span class="hljs-keyword">for</span>(i=0;i&lt;<span class="hljs-keyword">e</span>.length;i++){<span class="hljs-keyword">if</span>(<span class="hljs-keyword">e</span>[i].<span class="hljs-keyword">type</span>==&#39;password&#39;){<span class="hljs-keyword">e</span>[i].<span class="hljs-keyword">type</span>=&#39;text&#39;;}}void(0);</code></pre><p>replace text that contains urls with actual clickable links</p>
<pre class="hljs"><code>javascript:(function(){var<span class="hljs-variable">%20D</span>=document;<span class="hljs-variable">%20D</span>.body.normalize();<span class="hljs-variable">%20F</span>(D.body);<span class="hljs-variable">%20function</span><span class="hljs-variable">%20F</span>(n){var<span class="hljs-variable">%20u</span>,A,M,R,c,<span class="hljs-keyword">x</span>;<span class="hljs-variable">%20if</span>(n.nodeType==<span class="hljs-number">3</span>){<span class="hljs-variable">%20u</span>=n.data.search(<span class="hljs-regexp">/https?\:\/\/[^\s]*[^.,;&#39;%22&gt;\s)]]/</span>);<span class="hljs-variable">%20if</span>(u&gt;=<span class="hljs-number">0</span>)<span class="hljs-variable">%20</span>{<span class="hljs-variable">%20M</span>=n.splitText(u);<span class="hljs-variable">%20R</span>=M.splitText(RegExp.lastMatch.<span class="hljs-keyword">length</span>);<span class="hljs-variable">%20A</span>=document.createElement(<span class="hljs-variable">%22A</span><span class="hljs-variable">%22</span>);<span class="hljs-variable">%20A</span>.href=M.data;<span class="hljs-variable">%20A</span>.appendChild(M);<span class="hljs-variable">%20R</span>.parentNode.insertBefore(A,R);<span class="hljs-variable">%20</span>}<span class="hljs-variable">%20</span>}<span class="hljs-keyword">else</span><span class="hljs-variable">%20if</span>(n.tagName!=<span class="hljs-variable">%22STYLE</span><span class="hljs-variable">%22</span><span class="hljs-variable">%20</span>&amp;&amp;<span class="hljs-variable">%20n</span>.tagName!=<span class="hljs-variable">%22SCRIPT</span><span class="hljs-variable">%22</span><span class="hljs-variable">%20</span>&amp;&amp;<span class="hljs-variable">%20n</span>.tagName!=<span class="hljs-variable">%22A</span><span class="hljs-variable">%22</span>)<span class="hljs-keyword">for</span>(c=<span class="hljs-number">0</span>;<span class="hljs-keyword">x</span>=n.childNodes[c];++c)F(<span class="hljs-keyword">x</span>);<span class="hljs-variable">%20</span>}<span class="hljs-variable">%20</span>})();</code></pre><p>search for links in the current page</p>
<pre class="hljs"><code>javascript:(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>{<span class="hljs-keyword">var</span> x,n,nD,z,i; <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">htmlEscape</span>(<span class="hljs-params">s</span>)</span>{s=s.replace(<span class="hljs-regexp">/&amp;/g</span>,<span class="hljs-string">&#39;&amp;amp;&#39;</span>);s=s.replace(<span class="hljs-regexp">/&gt;/g</span>,<span class="hljs-string">&#39;&amp;gt;&#39;</span>);s=s.replace(<span class="hljs-regexp">/&lt;/g</span>,<span class="hljs-string">&#39;&amp;lt;&#39;</span>);<span class="hljs-keyword">return</span> s;} <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">attrQuoteEscape</span>(<span class="hljs-params">s</span>)</span>{s=s.replace(<span class="hljs-regexp">/&amp;/g</span>,<span class="hljs-string">&#39;&amp;amp;&#39;</span>); s=s.replace(<span class="hljs-regexp">/&quot;/g</span>, <span class="hljs-string">&#39;&amp;quot;&#39;</span>);<span class="hljs-keyword">return</span> s;} x=prompt(<span class="hljs-string">&quot;show links with this word/phrase in link text or target url (leave blank to list all links):&quot;</span>, <span class="hljs-string">&quot;&quot;</span>); n=<span class="hljs-number">0</span>; <span class="hljs-keyword">if</span>(x!=<span class="hljs-literal">null</span>) { x=x.toLowerCase(); nD = <span class="hljs-built_in">window</span>.open().document; nD.writeln(<span class="hljs-string">&#39;&lt;html&gt;&lt;head&gt;&lt;title&gt;Links containing &quot;&#39;</span>+htmlEscape(x)+<span class="hljs-string">&#39;&quot;&lt;/title&gt;&lt;base target=&quot;_blank&quot;&gt;&lt;/head&gt;&lt;body&gt;&#39;</span>); nD.writeln(<span class="hljs-string">&#39;Links on &lt;a href=&quot;&#39;</span>+attrQuoteEscape(location.href)+<span class="hljs-string">&#39;&quot;&gt;&#39;</span>+htmlEscape(location.href)+<span class="hljs-string">&#39;&lt;/a&gt;&lt;br&gt; with link text or target url containing &amp;quot;&#39;</span> + htmlEscape(x) + <span class="hljs-string">&#39;&amp;quot;&lt;br&gt;&lt;hr&gt;&#39;</span>); z = <span class="hljs-built_in">document</span>.links; <span class="hljs-keyword">for</span> (i = <span class="hljs-number">0</span>; i &lt; z.length; ++i) { <span class="hljs-keyword">if</span> ((z[i].innerHTML &amp;&amp; z[i].innerHTML.toLowerCase().indexOf(x) != -<span class="hljs-number">1</span>) || z[i].href.toLowerCase().indexOf(x) != -<span class="hljs-number">1</span> ) { nD.writeln(++n + <span class="hljs-string">&#39;. &lt;a href=&quot;&#39;</span> + attrQuoteEscape(z[i].href) + <span class="hljs-string">&#39;&quot;&gt;&#39;</span> + (z[i].innerHTML || htmlEscape(z[i].href)) + <span class="hljs-string">&#39;&lt;/a&gt;&lt;br&gt;&#39;</span>); } } nD.writeln(<span class="hljs-string">&#39;&lt;hr&gt;&lt;/body&gt;&lt;/html&gt;&#39;</span>); nD.close(); } })();</code></pre><p>show the urls for any links on the page (including image links)</p>
<pre class="hljs"><code>javascript:(<span class="hljs-keyword">function</span>(){var<span class="hljs-decorator">%20i</span>,c,x,h;<span class="hljs-decorator">%20for</span>(i=<span class="hljs-number">0</span>;x=document.links[i];++i)<span class="hljs-decorator">%20</span>{<span class="hljs-decorator">%20h</span>=x.href;<span class="hljs-decorator">%20x</span>.title+=<span class="hljs-decorator">%22</span><span class="hljs-decorator">%20</span><span class="hljs-decorator">%22</span><span class="hljs-decorator">%20</span>+<span class="hljs-decorator">%20x</span>.innerHTML;<span class="hljs-decorator">%20while</span>(c=x.firstChild)x.removeChild(c);<span class="hljs-decorator">%20x</span>.appendChild(document.createTextNode(h));<span class="hljs-decorator">%20</span>}<span class="hljs-decorator">%20</span>})()</code></pre><p>get rid of all presentational crap on the page</p>
<pre class="hljs"><code><span class="hljs-keyword">javascript</span>:(function(){function<span class="hljs-number">%20</span>R(w){try{var<span class="hljs-number">%20</span>d=w.document,j,i,t,T,N,b,r=1,C;for(j=0;t=[<span class="hljs-number">%22</span>object<span class="hljs-number">%22</span>,<span class="hljs-number">%22</span>embed<span class="hljs-number">%22</span>,<span class="hljs-number">%22</span>applet<span class="hljs-number">%22</span>,<span class="hljs-number">%22</span>iframe<span class="hljs-number">%22</span>][j];++j){T=d.getElementsByTagName(t);for(i=T.length-1;(i+1)&amp;&amp;(N=T[i]);--i)if(j!=3||!R((C=N.contentWindow)?C:N.contentDocument.defaultView)){b=d.createElement(<span class="hljs-number">%22</span>div<span class="hljs-number">%22</span>);b.style.width=N.width;<span class="hljs-number">%20</span>b.style.height=N.height;b.innerHTML=<span class="hljs-number">%22</span>&lt;del&gt;<span class="hljs-number">%22</span>+(j==3?<span class="hljs-number">%22</span>third-party<span class="hljs-number">%20</span><span class="hljs-number">%22</span>+t:t)+<span class="hljs-number">%22</span>&lt;/del&gt;<span class="hljs-number">%22</span>;N.parentNode.replaceChild(b,N);}}}catch(E){r=0}return<span class="hljs-number">%20</span>r}R(self);var<span class="hljs-number">%20</span>i,x;for(i=0;x=frames[i];++i)R(x)})();<span class="hljs-number">%20</span>javascript:(function(){var<span class="hljs-number">%20</span>newSS,<span class="hljs-number">%20</span>styles=&#39;<em><span class="hljs-number">%20</span>{<span class="hljs-number">%20</span>background:<span class="hljs-number">%20</span>white<span class="hljs-number">%20</span>!<span class="hljs-number">%20</span>important;<span class="hljs-number">%20</span>color:<span class="hljs-number">%20</span>black<span class="hljs-number">%20</span>!important<span class="hljs-number">%20</span>}<span class="hljs-number">%20</span>:link,<span class="hljs-number">%20</span>:link<span class="hljs-number">%20</span></em><span class="hljs-number">%20</span>{<span class="hljs-number">%20</span>color:<span class="hljs-number">%20</span>#0000EE<span class="hljs-number">%20</span>!important<span class="hljs-number">%20</span>}<span class="hljs-number">%20</span>:visited,<span class="hljs-number">%20</span>:visited<span class="hljs-number">%20</span><em><span class="hljs-number">%20</span>{<span class="hljs-number">%20</span>color:<span class="hljs-number">%20</span>#551A8B<span class="hljs-number">%20</span>!important<span class="hljs-number">%20</span>}&#39;;<span class="hljs-number">%20</span>if(document.createStyleSheet)<span class="hljs-number">%20</span>{<span class="hljs-number">%20</span>document.createStyleSheet(<span class="hljs-number">%22</span>javascript:&#39;<span class="hljs-number">%22</span>+styles+<span class="hljs-number">%22</span>&#39;<span class="hljs-number">%22</span>);<span class="hljs-number">%20</span>}<span class="hljs-number">%20</span>else<span class="hljs-number">%20</span>{<span class="hljs-number">%20</span>newSS=document.createElement(&#39;link&#39;);<span class="hljs-number">%20</span>newSS.rel=&#39;stylesheet&#39;;<span class="hljs-number">%20</span>newSS.href=&#39;data:text/css,&#39;+escape(styles);<span class="hljs-number">%20</span>document.getElementsByTagName(<span class="hljs-number">%22</span>head<span class="hljs-number">%22</span>)[0].appendChild(newSS);<span class="hljs-number">%20</span>}<span class="hljs-number">%20</span>})();<span class="hljs-number">%20</span>javascript:(function(){var<span class="hljs-number">%20</span>d=document;<span class="hljs-number">%20</span>function<span class="hljs-number">%20</span>K(N,w)<span class="hljs-number">%20</span>{<span class="hljs-number">%20</span>var<span class="hljs-number">%20</span>nn<span class="hljs-number">%20</span>=<span class="hljs-number">%20</span>d.createElement(w),<span class="hljs-number">%20</span>C<span class="hljs-number">%20</span>=<span class="hljs-number">%20</span>N.childNodes,<span class="hljs-number">%20</span>i;<span class="hljs-number">%20</span>for(i=C.length-1;i&gt;=0;--i)<span class="hljs-number">%20</span>nn.insertBefore(C[i],nn.childNodes[0]);<span class="hljs-number">%20</span>N.parentNode.replaceChild(nn,N);<span class="hljs-number">%20</span>}<span class="hljs-number">%20</span>function<span class="hljs-number">%20</span>Z(t,w)<span class="hljs-number">%20</span>{<span class="hljs-number">%20</span>var<span class="hljs-number">%20</span>T<span class="hljs-number">%20</span>=<span class="hljs-number">%20</span>document.getElementsByTagName(t),<span class="hljs-number">%20</span>j;<span class="hljs-number">%20</span>for<span class="hljs-number">%20</span>(j=T.length-1;j&gt;=0;--j)<span class="hljs-number">%20</span>K(T[j],w);<span class="hljs-number">%20</span>}<span class="hljs-number">%20</span>Z(<span class="hljs-number">%22</span>blink<span class="hljs-number">%22</span>,<span class="hljs-number">%20</span><span class="hljs-number">%22</span>span<span class="hljs-number">%22</span>);<span class="hljs-number">%20</span>Z(<span class="hljs-number">%22</span>marquee<span class="hljs-number">%22</span>,<span class="hljs-number">%20</span><span class="hljs-number">%22</span>div<span class="hljs-number">%22</span>);<span class="hljs-number">%20</span>})();<span class="hljs-number">%20</span>javascript:(function(){var<span class="hljs-number">%20</span>H=[<span class="hljs-number">%22</span>mouseover<span class="hljs-number">%22</span>,<span class="hljs-number">%22</span>mouseout<span class="hljs-number">%22</span>,<span class="hljs-number">%22</span>unload<span class="hljs-number">%22</span>,<span class="hljs-number">%22</span>resize<span class="hljs-number">%22</span>],o=window.opera;<span class="hljs-number">%20</span>if(document.addEventListener/</em>MOZ<em>/&amp;&amp;!o)<span class="hljs-number">%20</span>for(j<span class="hljs-number">%20</span>in<span class="hljs-number">%20</span>H)document.addEventListener(H[j],function(e){e.stopPropagation();},true);<span class="hljs-number">%20</span>else<span class="hljs-number">%20</span>if(window.captureEvents/</em>NS4<em>/&amp;&amp;!o)<span class="hljs-number">%20</span>{<span class="hljs-number">%20</span>document.captureEvents(-1/</em><span class="hljs-literal">ALL</span><em>/);for(j<span class="hljs-number">%20</span>in<span class="hljs-number">%20</span>H)window[<span class="hljs-number">%22</span><span class="hljs-literal">on</span><span class="hljs-number">%22</span>+H[j]]=null;}<span class="hljs-number">%20</span>else/</em>IE<em>/<span class="hljs-number">%20</span>{function<span class="hljs-number">%20</span>R(N){var<span class="hljs-number">%20</span>i,x;for(j<span class="hljs-number">%20</span>in<span class="hljs-number">%20</span>H)if(N[<span class="hljs-number">%22</span><span class="hljs-literal">on</span><span class="hljs-number">%22</span>+H[j]]/</em>NOT<span class="hljs-number">%20</span>TEXTNODE*/)N[<span class="hljs-number">%22</span><span class="hljs-literal">on</span><span class="hljs-number">%22</span>+H[j]]=null;for(i=0;x=N.childNodes[i];++i)R(x);}R(document);}})();<span class="hljs-number">%20</span>javascript:(function()<span class="hljs-number">%20</span>{<span class="hljs-number">%20</span>var<span class="hljs-number">%20</span>c,<span class="hljs-number">%20</span>tID,<span class="hljs-number">%20</span>iID;<span class="hljs-number">%20</span>tID<span class="hljs-number">%20</span>=<span class="hljs-number">%20</span>setTimeout(function(){},<span class="hljs-number">%200</span>);<span class="hljs-number">%20</span>for<span class="hljs-number">%20</span>(c=1;<span class="hljs-number">%20</span>c&lt;1000<span class="hljs-number">%20</span>&amp;&amp;<span class="hljs-number">%20</span>c&lt;=tID;<span class="hljs-number">%20</span>++c)<span class="hljs-number">%20</span>clearTimeout(tID<span class="hljs-number">%20</span>-<span class="hljs-number">%20</span>c);<span class="hljs-number">%20</span>iID<span class="hljs-number">%20</span>=<span class="hljs-number">%20</span>setInterval(function(){},1000);<span class="hljs-number">%20</span>for<span class="hljs-number">%20</span>(c=0;<span class="hljs-number">%20</span>c&lt;1000<span class="hljs-number">%20</span>&amp;&amp;<span class="hljs-number">%20</span>c&lt;=iID;<span class="hljs-number">%20</span>++c)<span class="hljs-number">%20</span>clearInterval(iID<span class="hljs-number">%20</span>-<span class="hljs-number">%20</span>c);<span class="hljs-number">%20</span>})();</code></pre><p>and, just for fun</p>
<pre class="hljs"><code>javascript:<span class="hljs-keyword">var</span> setTitle=<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>{<span class="hljs-number">0</span>!=<span class="hljs-built_in">document</span>.title.indexOf(<span class="hljs-string">&quot;%E0%B2%A0_%E0%B2%A0&quot;</span>)&amp;&amp;(<span class="hljs-built_in">document</span>.title=<span class="hljs-string">&quot;%E0%B2%A0_%E0%B2%A0 &quot;</span>+<span class="hljs-built_in">document</span>.title)};<span class="hljs-built_in">window</span>.addEventListener(<span class="hljs-string">&quot;load&quot;</span>,<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>{titleChange=<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>{<span class="hljs-built_in">console</span>.log(<span class="hljs-string">&quot;changed&quot;</span>),setTimeout(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>{setTitle()},<span class="hljs-number">20</span>)};<span class="hljs-keyword">var</span> e=<span class="hljs-built_in">document</span>.getElementsByTagName(<span class="hljs-string">&quot;title&quot;</span>)[<span class="hljs-number">0</span>];e.addEventListener(<span class="hljs-string">&quot;DOMSubtreeModified&quot;</span>,titleChange,!<span class="hljs-number">1</span>),setTitle()},!<span class="hljs-number">1</span>),setTitle();</code></pre></p>
    </section>
  </article>


  <article class="post tag-js tag-streams">
    <header class="post-header">
      <h2 class="post-title"><a href="/2016/streams.html">streams</a></h2>
      <span class="post-meta">
        <time datetime="2016-05-15">15 May, 2016</time>
         | tags: <a href="/tag/js/">js</a>, <a href="/tag/streams/">streams</a></span>

      <br>

    </header>
    <section class="post-content">
      <p><p>bits and pieces of notes on streams</p>
<pre class="hljs"><code><span class="hljs-keyword">const</span> foo = fetch(<span class="hljs-string">&#39;/something&#39;</span>)
.<span class="hljs-keyword">then</span>(r =&gt; r.json())
.<span class="hljs-keyword">then</span>(d =&gt; d.thingwewant)

<span class="hljs-keyword">const</span> bar = fetch(<span class="hljs-string">&#39;/otherstuff&#39;</span>)
.<span class="hljs-keyword">then</span>(r =&gt; r.body)

<span class="hljs-keyword">const</span> stream = someTaggedFunctionThing<code>&amp;lt;div&amp;gt;${foo}&amp;lt;/div&amp;gt;
  &amp;lt;span&amp;gt;${bar}&amp;lt;/span&amp;gt;</code></code></pre><ul>
<li>streams can be infinite</li>
<li>you can be aware of the beginning and end of a stream</li>
<li>unread values are buffered (unlike how events pre-listener(s) are just gone)</li>
<li>piping</li>
<li>error-handling (down the pipeline)</li>
<li>cancellation (up the pipeline)</li>
<li>flow control (react to the reader speed)</li>
<li>one reader per stream</li>
<li>untapped stream can be used like <code>tee</code></li>
</ul>
<p>with <code>fetch</code>, <code>result.value</code> is always of type <code>Uint8Array</code> (binary; use <code>TextDecoder</code>
on that if text content expected).</p>
<p>there may be transform streams implemented in the browser at some point (r/w).</p>
<p><code>reader.cancel()</code> (or <code>response.body.cancel()</code> if fetch)</p>
<pre class="hljs"><code>const stream = new ReadableStream<span class="hljs-list">({
  start<span class="hljs-list">(<span class="hljs-keyword">controller</span>)</span>{} // called immediately
, pull<span class="hljs-list">(<span class="hljs-keyword">controller</span>)</span>{}  // called when buffer isn<span class="hljs-quoted">&#39;t</span> full<span class="hljs-comment">; called until buffer is full</span>
, cancel<span class="hljs-list">(<span class="hljs-keyword">reason</span>)</span>{}    // called if stream is cancelled
}, queuingStrategy)</span>   // how the stream buffers <span class="hljs-list">(<span class="hljs-keyword">default</span> : one item)</span></code></pre><ul>
<li><code>controller.enqueue(something)</code> queues <code>something</code> in the stream&#39;s buffer</li>
<li><code>controller.close()</code> ends</li>
<li><code>controller.error(e)</code> sends <code>e</code> (is a terminal error)</li>
<li><code>controller.desiredSize</code> amount of buffer left (can be negative if overfilled)<ul>
<li><code>queuingStrategy</code> is used to get this</li>
</ul>
</li>
<li>you could call <code>controller.enqueue()</code> whenever there&#39;s data to send (stream as a push source)</li>
<li>you could wait until there&#39;s a <code>pull</code> called, then queue up some data (pull source)</li>
<li>you can do whatever you like (basically)</li>
<li>staying within the bounds of <code>controller.desiredSize</code> and having backpressure on the source
is good/efficient. won&#39;t break anything if you don&#39;t, though, unless you run out of memory.</li>
</ul>
<p>html renders as it&#39;s received (no matter how it gets there). so fetching/compiling/whatevering
markup on the fly (aka client-side rendering, aka the devil usually) without streams means
slowness.</p>
<p>here&#39;s a thing basically just copied out of jake archibald&#39;s blog. it&#39;s like this because we
don&#39;t have a <code>.pipe()</code> in the browser. we need that.</p>
<pre class="hljs"><code>const stream = new ReadableStream<span class="hljs-list">({
  start<span class="hljs-list">(<span class="hljs-keyword">controller</span>)</span>{
    // start and end from cache, middle from network with cache fallback
    const
      start = caches.match<span class="hljs-list">(<span class="hljs-quoted">&#39;/start-cached</span>&#39;)</span>
    , end   = caches.match<span class="hljs-list">(<span class="hljs-quoted">&#39;/end-cached</span>&#39;)</span>
    , mid   = fetch<span class="hljs-list">(<span class="hljs-quoted">&#39;/middle</span>&#39;)</span>
        .catch<span class="hljs-list">(<span class="hljs-list">()</span> =&gt; caches.match<span class="hljs-list">(<span class="hljs-quoted">&#39;/middle-cached</span>&#39;)</span>)</span>
      push  = stream =&gt; {
      const reader = stream.getReader<span class="hljs-list">()</span>
      return reader.read<span class="hljs-list">()</span>.then<span class="hljs-list">(<span class="hljs-keyword">function</span> process<span class="hljs-list">(<span class="hljs-keyword">result</span>)</span>{
        if <span class="hljs-list">(<span class="hljs-keyword">result</span>.done)</span> {
          return
        }
        controller.enqueue<span class="hljs-list">(<span class="hljs-keyword">result</span>.value)</span>
        return reader.read<span class="hljs-list">()</span>.then<span class="hljs-list">(<span class="hljs-keyword">process</span>)</span>
      })</span>
    }

    start.then<span class="hljs-list">(<span class="hljs-keyword">response</span> =&gt; push<span class="hljs-list">(<span class="hljs-keyword">response</span>.body)</span>)</span>
    .then<span class="hljs-list">(<span class="hljs-list">()</span> =&gt; mid)</span>.then<span class="hljs-list">(<span class="hljs-keyword">response</span> =&gt; push<span class="hljs-list">(<span class="hljs-keyword">response</span>.body)</span>)</span>
    .then<span class="hljs-list">(<span class="hljs-list">()</span> =&gt; end)</span>.then<span class="hljs-list">(<span class="hljs-keyword">response</span> =&gt; push<span class="hljs-list">(<span class="hljs-keyword">response</span>.body)</span>)</span>
    .then<span class="hljs-list">(<span class="hljs-list">()</span> =&gt; controller.close<span class="hljs-list">()</span>)</span>
  }
})</span></code></pre><p>From here down I&#39;ll probably just be taking notes on streams in Node.</p>
<p>Some important things to remember (for me to remember, that is) -- differences between the
proposed Stream and Node&#39;s streams:</p>
<ul>
<li>Readable<ul>
<li><code>.read()</code> instead of <code>.on(&#39;readable&#39;)</code></li>
<li>Also a sync <code>.read()</code></li>
<li>Cancellation semantics added</li>
<li><code>desiredSize</code></li>
<li><code>tee</code>ing built in</li>
<li><code>data</code> event fully gone (it&#39;s only in Node streams in compatability mode, btw)</li>
<li><code>pause</code> and <code>resume</code> aren&#39;t a thing</li>
<li>no <code>unshift</code></li>
<li>binary/string/object mode switching isn&#39;t a thing</li>
<li>size parameter is gone (use BYOB readers)</li>
</ul>
</li>
<li>Writable<ul>
<li>No cork/uncork</li>
</ul>
</li>
<li>Transform<ul>
<li>now just <code>{readable, writable}</code> rly</li>
</ul>
</li>
<li>other<ul>
<li>promises instead of cbs</li>
<li>no enc/dec built-in</li>
<li><code>pipeTo(writable)</code> and <code>pipeThrough(transform)</code> instead of just <code>pipe()</code><ul>
<li>so <code>source.pipeThrough(thing).pipeTo(destination)</code> is syntactic sugar for
<code>source.pipeTo(thing.writable) ; thing.readable.pipeTo(destination)</code></li>
</ul>
</li>
</ul>
</li>
</ul>
<p>Okay, so, Node streams.</p>
<ul>
<li><code>req</code> and <code>res</code> are streams</li>
<li><code>.pipe()</code> listens for &#39;data&#39; and &#39;end&#39; from fs streams</li>
<li><code>.pipe()</code> handles backpressure for ya</li>
<li>types of streams:<ul>
<li>readable</li>
<li>writable</li>
<li>transform</li>
<li>duplex</li>
<li>&#39;classic&#39;</li>
</ul>
</li>
<li>chain pipes, don&#39;t break crap out<ul>
<li><code>one.pipe(two).pipe(three)</code>, not <code>one.pipe(two);two.pipe(three);</code></li>
<li>that&#39;s basically the same as <code>one | two | three</code></li>
</ul>
</li>
</ul>
<pre class="hljs"><code>//<span class="hljs-comment">
// readable</span><span class="hljs-comment">
//</span>

const Readable = <span class="hljs-built_in">require</span>(<span class="hljs-string">&#39;stream&#39;</span>).Readable
const rs = <span class="hljs-built_in">new</span> Readable
rs.push(<span class="hljs-string">&#39;something, and &#39;</span>)
rs.push(<span class="hljs-string">&#39;something else.&#39;</span>)
rs.push(<span class="hljs-constant">null</span>)<span class="hljs-comment"> // this tells data consumers that we&#39;re done with rs</span>
rs.pipe(<span class="hljs-built_in">process</span>.<span class="hljs-keyword">stdout</span>)<span class="hljs-comment">
// so the pushes are buffered until a consumer wants them (the pipe to standard out)</span>
<span class="hljs-comment">
// instead of buffering:</span>
let c = <span class="hljs-number">100</span>
rs.<span class="hljs-title">_read</span> = () =&gt; {
  rs.push(String.fromCharCode(c++))
  <span class="hljs-keyword">if</span> (c &gt; <span class="hljs-string">&#39;z&#39;</span>.charCodeAt(<span class="hljs-number">0</span>)) {
    rs.push(<span class="hljs-constant">null</span>)
  }
}
rs.pipe(<span class="hljs-built_in">process</span>.<span class="hljs-keyword">stdout</span>)<span class="hljs-comment">
// ._read can take a size param, the amount (in bytes) that the consumer wants</span><span class="hljs-comment">
// to call it like that, try <code>node thisfile | head -cN</code> where <code>N</code> is an integer</span><span class="hljs-comment">
// note that we&#39;d need to set up an error handler here because there&#39;ll be a SIGPIPE</span><span class="hljs-comment">
// after <code>head</code> (EPIPE in node). that&#39;s not an issue when keeping your business all</span><span class="hljs-comment">
// in node.</span><span class="hljs-comment">
// <code>Readable({objectMode : true})</code> to be able to push arbitrary stuff (not just</span><span class="hljs-comment">
// buffers and strings).</span>

<span class="hljs-built_in">process</span>.<span class="hljs-keyword">stdin</span>.on(<span class="hljs-string">&#39;readable&#39;</span>, () =&gt; {
  let buf = <span class="hljs-built_in">process</span>.<span class="hljs-keyword">stdin</span>.<span class="hljs-built_in">read</span>()
  console.dir(buf)
})<span class="hljs-comment">
// echo stuff, pipe it, eg <code>(echo foo ; echo bar ; sleep 10 ; echo asdfghjkl) | node this-script.js</code></span><span class="hljs-comment">
// usually we&#39;d probably pipe a stream into another stream, maybe using through2 or somesuch</span><span class="hljs-comment">
// the above will return null at the end of what&#39;s being sent, because there&#39;s nothing left</span><span class="hljs-comment">
// we could do <code>.read(N)</code> where <code>N</code> is bytes. doesn&#39;t work for object streams.</span>
<span class="hljs-built_in">process</span>.<span class="hljs-keyword">stdin</span>.on(<span class="hljs-string">&#39;readable&#39;</span>, () =&gt; {
  let buf = <span class="hljs-built_in">process</span>.<span class="hljs-keyword">stdin</span>.<span class="hljs-built_in">read</span>(<span class="hljs-number">2</span>)
  console.dir(buf)<span class="hljs-comment"> // so we&#39;d get 2-byte chunks here. adding:</span>
  <span class="hljs-built_in">process</span>.<span class="hljs-keyword">stdin</span>.<span class="hljs-built_in">read</span>(<span class="hljs-number">0</span>)<span class="hljs-comment"> // will get the rest and make this actually work.</span>
})
<span class="hljs-comment">
// YAY, that&#39;s it for readable streams</span>
<span class="hljs-comment">
//</span><span class="hljs-comment">
// writable</span><span class="hljs-comment">
//</span>

const Writable = <span class="hljs-built_in">require</span>(<span class="hljs-string">&#39;stream&#39;</span>).Writable
const ws = <span class="hljs-built_in">new</span> Writable()
ws.<span class="hljs-title">_write</span> = (chunk, encoding, next) =&gt; {
  console.dir(chunk)
  next()
}
<span class="hljs-built_in">process</span>.<span class="hljs-keyword">stdin</span>.pipe(ws)<span class="hljs-comment">
// chunk is the data written</span><span class="hljs-comment">
// encoding (string) is only for when <code>opts.decodeStrings</code> is false and we&#39;ve been given a string</span><span class="hljs-comment">
// the third arg is cb, tells consumer to go ahead and write more. it can take an err obj</span><span class="hljs-comment">
// if input stream is string, that&#39;ll be converted to buf. when creating the stream we can do</span>
const strWs = <span class="hljs-built_in">new</span> Writable({decodeStrings : <span class="hljs-constant">false</span>})<span class="hljs-comment">
// and if we&#39;re getting in objects</span>
const objWs = <span class="hljs-built_in">new</span> Writable({objectMode : <span class="hljs-constant">true</span>})
<span class="hljs-comment">
// writing is basically as simple as calling .write (as we do with stdout)</span><span class="hljs-comment">
// you can do a .end() to say we&#39;re done. that can take data to write, right before ending.</span><span class="hljs-comment">
// write returns false when there&#39;s more data in incoming buff than opts.highWaterMark;</span><span class="hljs-comment">
// listen for drain event to know when it&#39;s empty</span>
<span class="hljs-comment">
//</span><span class="hljs-comment">
// transform</span><span class="hljs-comment">
// these are duplex streams that do exactly what it sounds like. sometimes called &#39;through&#39; streams.</span><span class="hljs-comment">
//</span>
<span class="hljs-comment">
//</span><span class="hljs-comment">
// duplex</span><span class="hljs-comment">
// r/w where both ends are two-way. example: <code>x.pipe(y).pipe(x)</code></span>
<span class="hljs-comment">
//</span><span class="hljs-comment">
// classic streams</span><span class="hljs-comment">
//</span>
<span class="hljs-comment">
// we&#39;re on node 6.1.0 as of this writing, and chances are i won&#39;t be doing much node stuff</span><span class="hljs-comment">
// at all in the forseeable future, so i really don&#39;t care too too much about the legacy</span><span class="hljs-comment">
// streams api. just <code>require(&#39;readable-stream&#39;)</code> instead of <code>&#39;stream&#39;</code>, if we must support</span><span class="hljs-comment">
// node or other streams from &lt;=v0.8.</span>
<span class="hljs-comment">
// readable example:</span>
const <span class="hljs-built_in">sin</span> = <span class="hljs-built_in">process</span>.<span class="hljs-keyword">stdin</span>
<span class="hljs-built_in">sin</span>.on(<span class="hljs-string">&#39;data&#39;</span>, buf =&gt; console.<span class="hljs-built_in">log</span>(buf))
<span class="hljs-built_in">sin</span>.on(<span class="hljs-string">&#39;end&#39;</span>, () =&gt; console.<span class="hljs-built_in">log</span>(<span class="hljs-string">&#39;peace&#39;</span>))<span class="hljs-comment">
// as soon as a data listener is registered, you&#39;re using compatability mode, so</span><span class="hljs-comment">
// basically you lose a lot of functionality.</span><span class="hljs-comment">
// through (the package) lets you use legacy streams with pipe</span><span class="hljs-comment">
// these also have pause and resume.</span>
<span class="hljs-comment">
// writable:</span><span class="hljs-comment">
// define write(buf), end(buf), and destroy(). end doesn&#39;t HAVE to have (buf), but</span><span class="hljs-comment">
// it should work so that stream.end(buf) means stream.write(buf) ; stream.end(), so just do that.</span>
<span class="hljs-comment">
//</span><span class="hljs-comment">
//</span><span class="hljs-comment">
// streams that are built in to node</span><span class="hljs-comment">
//</span><span class="hljs-comment">
//</span>
<span class="hljs-comment">
// not gonna take really extensive notes here, for the reasons above and also because</span><span class="hljs-comment">
// it&#39;s really easy to just go to the api docs and read all of them.</span></code></pre></p>
    </section>
  </article>


  <article class="post tag-js tag-fetch">
    <header class="post-header">
      <h2 class="post-title"><a href="/2016/fetch.html">fetch</a></h2>
      <span class="post-meta">
        <time datetime="2016-05-12">12 May, 2016</time>
         | tags: <a href="/tag/js/">js</a>, <a href="/tag/fetch/">fetch</a></span>

      <br>

    </header>
    <section class="post-content">
      <p><p>fetch is a thing</p>
<p>uses promises</p>
<p>here&#39;s doing stuff with xhr:</p>
<pre class="hljs"><code><span class="hljs-keyword">var</span> xhr = <span class="hljs-keyword">new</span> XMLHttpRequest()
xhr.open(<span class="hljs-string">&#39;GET&#39;</span>, url)
xhr.responseType = <span class="hljs-string">&#39;json&#39;</span>

xhr.onload = <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>{
  <span class="hljs-comment">// do stuff with xhr.response</span>
}

xhr.onerror = <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>{
  <span class="hljs-built_in">console</span>.error(<span class="hljs-string">&#39;crap&#39;</span>)
}

xhr.send()</code></pre><p>and the equivalent with fetch:</p>
<pre class="hljs"><code><span class="hljs-function"><span class="hljs-title">fetch</span><span class="hljs-params">(url)</span></span>
.<span class="hljs-function"><span class="hljs-title">then</span><span class="hljs-params">(res =&gt; res.json()</span></span>)
.<span class="hljs-function"><span class="hljs-title">then</span><span class="hljs-params">(data =&gt; /<em> do stuff with data </em>/)</span></span>
.<span class="hljs-function"><span class="hljs-title">catch</span><span class="hljs-params">(e =&gt; console.error(e)</span></span>)</code></pre><p>granted i&#39;m also using es2015 in the fetch example, which makes it even nicer-looking,
but whatever.</p>
<p>using esnext async functions:</p>
<pre class="hljs"><code><span class="hljs-list">(<span class="hljs-keyword">async</span><span class="hljs-list">()</span> =&gt; <span class="hljs-collection">{
  try <span class="hljs-collection">{
    let res = await fetch<span class="hljs-list">(<span class="hljs-keyword">url</span>)</span>
    let data = awat res.json<span class="hljs-list">()</span>
    // do stuff with data
  }</span> catch<span class="hljs-list">(<span class="hljs-keyword">e</span>)</span> <span class="hljs-collection">{
    console.error<span class="hljs-list">(<span class="hljs-keyword">e</span>)</span>
  }</span>
}</span>)</span><span class="hljs-list">()</span></code></pre><p>xhr is kinda gross. i mean, everyone&#39;s used to it, and it basically works, but... yech.</p>
<p>fetch is basically complete i think? i mean, evidently it&#39;s even in safari&#39;s dev preview version.</p>
<p>if it&#39;s made it to safari, it&#39;s probably safe to use.</p>
<p>fetch keeps req and res separate (they&#39;re constructors).</p>
<p>request.context lets you tell where the req actually came from (eg link vs loaded asset vs whatever).</p>
<p>you can throw a <code>no-cors</code> in your request so stuff doesn&#39;t fail (like it would with XHR) without CORS headers.</p>
<pre class="hljs"><code><span class="hljs-function"><span class="hljs-title">fetch</span><span class="hljs-params">(<span class="hljs-string">&#39;//foo.com&#39;</span>, {mode : <span class="hljs-string">&#39;no-cors&#39;</span>})</span></span>.<span class="hljs-function"><span class="hljs-title">then</span><span class="hljs-params">(response =&gt; console.log(response.type)</span></span>) <span class="hljs-comment">// opaque</span></code></pre><p>can&#39;t actually read the content of response here, but it could be used by something else (add an event listener
for when it comes back, for example).</p>
<p>other modes: <code>same-origin</code>, <code>cors</code>, and <code>cors-with-forced-preflight</code>.</p>
<p>you could also cache that stuff, which is nice.</p>
<p>xhr buffers the entire response into memory. with fetch you can access the stream. actually with XHR you can access
it sort of, with <code>responseText</code> while it&#39;s still going on, but it&#39;s going to put it all in mem anyway.</p>
<pre class="hljs"><code>fetch(url)
.then(response =&gt; {
  <span class="hljs-keyword">let</span> foo = &#39;some <span class="hljs-type">string</span>, <span class="hljs-keyword">for</span> example&#39;
  <span class="hljs-keyword">let</span> reader = response.body.getReader()
  reader.read().then(<span class="hljs-literal">result</span>) =&gt; {
    // okay there&#39;s actually a little more to this, but the idea <span class="hljs-keyword">is</span>,
    // we can have an <span class="hljs-keyword">if</span> <span class="hljs-keyword">in</span> here to check <span class="hljs-keyword">if</span> this bit <span class="hljs-keyword">of</span> the stream
    // <span class="hljs-keyword">is</span> equal to the thing we want. <span class="hljs-keyword">and</span> then, say
    reader.cancel(&#39;i guess we\&#39;re done, here&#39;)
  }
})
.then(<span class="hljs-literal">result</span> =&gt; /<em> <span class="hljs-keyword">do</span> stuff </em>/)
.catch(e =&gt; console.error(e))</code></pre><p><code>response.body</code> is a <code>ReadableStream</code>.</p>
<p>How cool is this? Think about it. You have a stream of data from somewhere. You can generate
content on the go, using that, with fetch. You can feed that to the view as you get it.</p>
<p>I guess fetch didn&#39;t have streams when it first started to be implemented, so they have some
other readers they stuck in there. So, <code>response</code> (or <code>request</code> actually, too), then</p>
<ul>
<li><code>.arrayBuffer()</code></li>
<li><code>.blob()</code></li>
<li><code>.formData()</code></li>
<li><code>.json()</code></li>
<li>and <code>.text()</code></li>
</ul>
<p>Once they&#39;ve been called, you can&#39;t call another one on that same stream (they &#39;drain&#39; the stream). What we could
do instead is <code>.clone()</code>: <code>fetch(url).then(response =&gt; respone.clone().json().catch() =&gt; response.text())</code>.</p>
<p>You can check <code>response.headers</code> to decide what you need to do with it.</p>
<pre class="hljs"><code>fetch(url)
.<span class="hljs-keyword">then</span>(response =&gt; {
  <span class="hljs-keyword">if</span> (response.headers.<span class="hljs-built_in">get</span>(<span class="hljs-string">&#39;Content-Type&#39;</span>) === <span class="hljs-string">&#39;application/json&#39;</span>) {
    <span class="hljs-constant">return</span> response.json()
  }
  <span class="hljs-constant">return</span> response.<span class="hljs-keyword">text</span>()
})</code></pre><p><code>headers</code> can be used for reading and writing, has <code>Headers.prototype[Symbol.iterator]</code>. You get better
control over cache, and same-origin requests without credentials (no credentials is fetch&#39;s default).</p>
<p>You <em>can&#39;t</em> abort a request with fetch before at least the headers come back (yet).</p>
<p>You can&#39;t track progress (yet), but you can do stuff to do that on your own (by working with <code>Content-Length</code>).</p>
<p>Sync is in the spec, but doesn&#39;t look like anyone will implement that in the API.</p>
<p>Oh right, thre are other verbs here. Or just POST?</p>
<pre class="hljs"><code>fetch(url, {
  <span class="hljs-keyword">method</span>  : &#39;post&#39;
, headers : {&#39;<span class="hljs-type">Content</span>-<span class="hljs-type">Type</span>&#39; : &#39;application/x-www-form-urlencoded; charset=<span class="hljs-type">UTF</span>-<span class="hljs-number">8</span>&#39;}
, body    : &#39;stuff=things&amp;hello=world&#39;
})
.then(/<em> etc. </em>/)</code></pre><p>And credentials (like cookies, for example): <code>fetch(url, {credentials : &#39;include&#39;})</code></p>
<p>There&#39;s a node module called <code>fetch-it</code> which is basically like (and is based on <code>axios</code>), but using fetch
instead of XHR. Looks pretty nice.</p>
<p>There are a bunch of other fetch implementations. But it&#39;s already basically in browsers, so Node can&#39;t be
<em>too</em> far behind... right?</p>
</p>
    </section>
  </article>


  <article class="post tag-js tag-fizzbuzz">
    <header class="post-header">
      <h2 class="post-title"><a href="/2016/fizzbuzz.html">fizzbuzz</a></h2>
      <span class="post-meta">
        <time datetime="2016-05-07">07 May, 2016</time>
         | tags: <a href="/tag/js/">js</a>, <a href="/tag/fizzbuzz/">fizzbuzz</a></span>

      <br>

    </header>
    <section class="post-content">
      <p><h1 id="fizzbuzz-">fizzbuzz!</h1>
<p>i like to collect fizzbuzz solutions. that&#39;s a little weird, i guess. but fun.</p>
<p>fizzbuzz is kind of the stereotypical pointless toy problem/whiteboarding problem.</p>
<p>if you&#39;re not familiar, here&#39;s the standard definition of the problem:</p>
<p>write a program that prints numbers from 1 to 100, but for multiples of
three print &#39;fizz,&#39; for multiples of five print &#39;buzz,&#39; and for multiples
of both three and five print &#39;fizzbuzz.&#39;</p>
<p>and some good reading on fizzbuzz:</p>
<ul>
<li><a href="http://c2.com/cgi/wiki?FizzBuzzTest">http://c2.com/cgi/wiki?FizzBuzzTest</a></li>
<li><a href="http://blog.codinghorror.com/why-cant-programmers-program/">http://blog.codinghorror.com/why-cant-programmers-program/</a></li>
<li><a href="https://www.rosettacode.org/wiki/FizzBuzz">https://www.rosettacode.org/wiki/FizzBuzz</a></li>
<li><a href="http://www.tomdalling.com/blog/software-design/fizzbuzz-in-too-much-detail/">http://www.tomdalling.com/blog/software-design/fizzbuzz-in-too-much-detail/</a></li>
</ul>
<p>i keep a bunch of solutions in js <a href="https://github.com/zacanger/pineapple-curry/tree/solutions/fizzbuzz">here</a>.</p>
<p>here are some of them (including some other languages).</p>
<h2 id="in-c">in c</h2>
<pre class="hljs"><code><span class="hljs-preprocessor">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;stdio.h&gt;</span></span>

<span class="hljs-function"><span class="hljs-keyword">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span>{
  <span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;Fizzbuzz from 1 through 100.\n&quot;</span>);
  <span class="hljs-keyword">int</span> hundred;
  <span class="hljs-keyword">for</span> (hundred = <span class="hljs-number">1</span>; hundred &lt;= <span class="hljs-number">100</span>; hundred++){
    <span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;%d&quot;</span>, hundred);
    <span class="hljs-keyword">if</span> (hundred % <span class="hljs-number">3</span> == <span class="hljs-number">0</span>) {
      <span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;Fizz&quot;</span>);
    } <span class="hljs-keyword">if</span> (hundred % <span class="hljs-number">5</span> == <span class="hljs-number">0</span>) {
      <span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;Buzz\n&quot;</span>);
    } <span class="hljs-keyword">else</span> {
      <span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;\n&quot;</span>);
    }
  }
  <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;
}</code></pre><h2 id="coffeescript">coffeescript</h2>
<pre class="hljs"><code><span class="hljs-keyword">for</span> <span class="hljs-built_in">i</span> in <span class="hljs-matrix">[<span class="hljs-number">1.</span><span class="hljs-number">.100</span>]</span>
  str = <span class="hljs-string">&#39;&#39;</span>
  str += <span class="hljs-string">&#39;Fizz&#39;</span> <span class="hljs-keyword">if</span> <span class="hljs-built_in">i</span> <span class="hljs-comment">% 3 is 0</span>
  str += <span class="hljs-string">&#39;Buzz&#39;</span> <span class="hljs-keyword">if</span> <span class="hljs-built_in">i</span> <span class="hljs-comment">% 5 is 0</span>
  console.<span class="hljs-built_in">log</span> (<span class="hljs-keyword">if</span> str.<span class="hljs-built_in">length</span> is <span class="hljs-number">0</span> then <span class="hljs-built_in">i</span> <span class="hljs-keyword">else</span> str)</code></pre><h2 id="php">php</h2>
<pre class="hljs"><code>&lt;?php

<span class="hljs-keyword">function</span> fizzbuzz(<span class="hljs-variable">$num</span>) {
  if (<span class="hljs-variable">$num</span> % <span class="hljs-number">15</span> == <span class="hljs-number">0</span>) {
    print(<span class="hljs-string">&quot;FizzBuzz&quot;</span> . PHP_EOL);
  } else if (<span class="hljs-variable">$num</span> % <span class="hljs-number">5</span> == <span class="hljs-number">0</span>) {
    print(<span class="hljs-string">&quot;Buzz&quot;</span> . PHP_EOL);
  } else if (<span class="hljs-variable">$num</span> % <span class="hljs-number">3</span> == <span class="hljs-number">0</span>) {
    print(<span class="hljs-string">&quot;Fizz&quot;</span> . PHP_EOL);
  } else {
    print(<span class="hljs-variable">$num</span> . PHP_EOL);
  }
}

<span class="hljs-keyword">for</span> (<span class="hljs-variable">$i</span> = <span class="hljs-number">0</span>; <span class="hljs-variable">$i</span> &lt;=<span class="hljs-number">100</span>; <span class="hljs-variable">$i</span>++)
{
  fizzbuzz(<span class="hljs-variable">$i</span>);
}</code></pre><h2 id="ruby">ruby</h2>
<pre class="hljs"><code>def fizz_buzz(num)
  <span class="hljs-literal">result</span> = &#39;&#39;
  <span class="hljs-literal">result</span> += &#39;<span class="hljs-type">Fizz</span>&#39; <span class="hljs-keyword">if</span> num % <span class="hljs-number">3</span> == <span class="hljs-number">0</span>
  <span class="hljs-literal">result</span> += <span class="hljs-string">&quot;Buzz&quot;</span> <span class="hljs-keyword">if</span> num % <span class="hljs-number">5</span> == <span class="hljs-number">0</span>
  puts(<span class="hljs-literal">result</span>.empty? ? num : <span class="hljs-literal">result</span>)
<span class="hljs-keyword">end</span>

(<span class="hljs-number">1</span>..<span class="hljs-number">100</span>).each{|x|
  fizz_buzz(x)
}

<span class="hljs-comment">####</span>

fizz = [<span class="hljs-string">&quot;&quot;</span>,<span class="hljs-string">&quot;&quot;</span>,<span class="hljs-string">&quot;Fizz&quot;</span>].lazy.cycle
buzz = [<span class="hljs-string">&quot;&quot;</span>,<span class="hljs-string">&quot;&quot;</span>,<span class="hljs-string">&quot;&quot;</span>,<span class="hljs-string">&quot;&quot;</span>,<span class="hljs-string">&quot;Buzz&quot;</span>].lazy.cycle
nums = (<span class="hljs-number">1</span>..<span class="hljs-type">Float</span>::<span class="hljs-type">INFINITY</span>).lazy

fizzbuzz = nums.zip(fizz,buzz).map <span class="hljs-keyword">do</span> |n,f,b|
  (f.empty? &amp;&amp; b.empty?) ? n.to_s : f + b
<span class="hljs-keyword">end</span>

puts fizzbuzz.take(<span class="hljs-number">100</span>).to_a

<span class="hljs-comment">####</span>

<span class="hljs-number">1</span>.upto(<span class="hljs-number">100</span>) <span class="hljs-keyword">do</span> |i|
  fizz = (i % <span class="hljs-number">3</span> == <span class="hljs-number">0</span>)
  buzz = (i % <span class="hljs-number">5</span> == <span class="hljs-number">0</span>)
  puts <span class="hljs-keyword">case</span>
    <span class="hljs-keyword">when</span> fizz &amp;&amp; buzz then &#39;<span class="hljs-type">FizzBuzz</span>&#39;
    <span class="hljs-keyword">when</span> fizz then &#39;<span class="hljs-type">Fizz</span>&#39;
    <span class="hljs-keyword">when</span> buzz then &#39;<span class="hljs-type">Buzz</span>&#39;
    <span class="hljs-keyword">else</span> i
  <span class="hljs-keyword">end</span>
<span class="hljs-keyword">end</span>

<span class="hljs-comment">####</span>

<span class="hljs-number">1</span>.upto(<span class="hljs-number">100</span>) <span class="hljs-keyword">do</span> |i|
  <span class="hljs-keyword">if</span> i % <span class="hljs-number">3</span> == <span class="hljs-number">0</span> &amp;&amp; i % <span class="hljs-number">5</span> == <span class="hljs-number">0</span>
    puts &#39;<span class="hljs-type">FizzBuzz</span>&#39;
  elsif i % <span class="hljs-number">3</span> == <span class="hljs-number">0</span>
    puts &#39;<span class="hljs-type">Fizz</span>&#39;
  elsif i % <span class="hljs-number">5</span> == <span class="hljs-number">0</span>
    puts &#39;<span class="hljs-type">Buzz</span>&#39;
  <span class="hljs-keyword">else</span>
    puts i
  <span class="hljs-keyword">end</span>
<span class="hljs-keyword">end</span></code></pre><h2 id="python">python</h2>
<pre class="hljs"><code>i=<span class="hljs-number">0</span>
<span class="hljs-keyword">while</span> <span class="hljs-number">1</span>:i+=<span class="hljs-number">1</span>;<span class="hljs-keyword">print</span><span class="hljs-string">&quot;&quot;</span>.join(<span class="hljs-string">&quot;BzuzzizF&quot;</span>[::<span class="hljs-number">2</span>*j]<span class="hljs-keyword">for</span> j <span class="hljs-keyword">in</span>(-<span class="hljs-number">1</span>,<span class="hljs-number">1</span>)<span class="hljs-keyword">if</span> <span class="hljs-number">1</span>&gt;i%(<span class="hljs-number">4</span>+j))<span class="hljs-keyword">or</span> i


print([<span class="hljs-string">&quot;FizzBuzz&quot;</span> <span class="hljs-keyword">if</span> x%<span class="hljs-number">15</span> == <span class="hljs-number">0</span> <span class="hljs-keyword">else</span> <span class="hljs-string">&quot;Fizz&quot;</span> <span class="hljs-keyword">if</span> x%<span class="hljs-number">3</span> == <span class="hljs-number">0</span> <span class="hljs-keyword">else</span> <span class="hljs-string">&quot;Buzz&quot;</span> <span class="hljs-keyword">if</span> x % <span class="hljs-number">5</span> == <span class="hljs-number">0</span> <span class="hljs-keyword">else</span> x <span class="hljs-keyword">for</span> x <span class="hljs-keyword">in</span> range(<span class="hljs-number">1</span>,<span class="hljs-number">101</span>)])


<span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">fizz_buzz</span><span class="hljs-params">(num)</span>:</span>
    <span class="hljs-keyword">if</span> num % <span class="hljs-number">15</span> == <span class="hljs-number">0</span>:
        <span class="hljs-keyword">print</span> <span class="hljs-string">&quot;FizzBuzz&quot;</span>
    <span class="hljs-keyword">elif</span> num % <span class="hljs-number">5</span> == <span class="hljs-number">0</span>:
        <span class="hljs-keyword">print</span> <span class="hljs-string">&quot;Buzz&quot;</span>
    <span class="hljs-keyword">elif</span> num % <span class="hljs-number">3</span> == <span class="hljs-number">0</span>:
        <span class="hljs-keyword">print</span> <span class="hljs-string">&quot;Fizz&quot;</span>
    <span class="hljs-keyword">else</span>:
        <span class="hljs-keyword">print</span> num

<span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> xrange(<span class="hljs-number">1</span>, <span class="hljs-number">101</span>):
    fizz_buzz(i)



<span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">fizz_buzz</span><span class="hljs-params">(num)</span>:</span>
    <span class="hljs-keyword">if</span> num % <span class="hljs-number">15</span> == <span class="hljs-number">0</span>:
        print(<span class="hljs-string">&quot;FizzBuzz&quot;</span>)
    <span class="hljs-keyword">elif</span> num % <span class="hljs-number">5</span> == <span class="hljs-number">0</span>:
        print(<span class="hljs-string">&quot;Buzz&quot;</span>)
    <span class="hljs-keyword">elif</span> num % <span class="hljs-number">3</span> == <span class="hljs-number">0</span>:
        print(<span class="hljs-string">&quot;Fizz&quot;</span>)
    <span class="hljs-keyword">else</span>:
        print(num)

<span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> range(<span class="hljs-number">1</span>, <span class="hljs-number">101</span>):
    fizz_buzz(i)</code></pre><h2 id="haskell">haskell</h2>
<pre class="hljs"><code><span class="hljs-comment">-- i wrote this one</span>
<span class="hljs-module"><span class="hljs-keyword">module</span> Main <span class="hljs-keyword">where</span></span>

<span class="hljs-title">main</span> :: <span class="hljs-type">IO</span> ()
<span class="hljs-title">main</span> = printAll $ map fizzBuzz [<span class="hljs-number">1.</span><span class="hljs-number">.100</span>]
  <span class="hljs-keyword">where</span>
    printAll [] = return ()
    printAll (x:xs) = putStrLn x &gt;&gt; printAll xs

<span class="hljs-title">fizzBuzz</span> :: <span class="hljs-type">Integer</span> -&gt; <span class="hljs-type">String</span>
<span class="hljs-title">fizzBuzz</span> n | n <code>mod</code> <span class="hljs-number">15</span> == <span class="hljs-number">0</span> = <span class="hljs-string">&quot;FizzBuzz&quot;</span>
           | n <code>mod</code> <span class="hljs-number">5</span>  == <span class="hljs-number">0</span> = <span class="hljs-string">&quot;Fizz&quot;</span>
           | n <code>mod</code> <span class="hljs-number">3</span>  == <span class="hljs-number">0</span> = <span class="hljs-string">&quot;Buzz&quot;</span>
           | otherwise       = show n



<span class="hljs-comment">-- i did not write these. found around.</span>

[max(show x)(concat[n|(f,n)&lt;-[(<span class="hljs-number">3</span>,<span class="hljs-string">&quot;Fizz&quot;</span>),(<span class="hljs-number">5</span>,<span class="hljs-string">&quot;Buzz&quot;</span>)],mod x f==<span class="hljs-number">0</span>])|x&lt;-[<span class="hljs-number">1.</span><span class="hljs-number">.100</span>]]

<span class="hljs-comment">-- gh:ryoia</span>
<span class="hljs-comment">-- i like this one. it&#39;s a lot like how i thought it was supposed to be</span>
<span class="hljs-comment">-- which means i can read it, except it&#39;s cleaner so i can see a simple way</span>
<span class="hljs-comment">-- to improve on my own super limited hs</span>
<span class="hljs-module"><span class="hljs-keyword">module</span> FizzBuzz <span class="hljs-keyword">where</span></span>

<span class="hljs-title">divBy</span> :: <span class="hljs-type">Int</span> -&gt; <span class="hljs-type">Int</span> -&gt; <span class="hljs-type">Bool</span>
<span class="hljs-title">divBy</span> d x = x <code>mod</code> d == <span class="hljs-number">0</span>

<span class="hljs-title">fizzBuzz</span> :: <span class="hljs-type">Int</span> -&gt; <span class="hljs-type">String</span>
<span class="hljs-title">fizzBuzz</span> x
  | divBy <span class="hljs-number">15</span> x = <span class="hljs-string">&quot;FizzBuzz&quot;</span>
  | divBy <span class="hljs-number">5</span>  x = <span class="hljs-string">&quot;Buzz&quot;</span>
  | divBy <span class="hljs-number">3</span>  x = <span class="hljs-string">&quot;Fizz&quot;</span>
  | otherwise  = show x


<span class="hljs-comment">-- the below are from haskellquiz</span>

<span class="hljs-comment">-- a FizzBuzz (and FizzBuzzBaz) solution by Aaron Contorer.</span>
<span class="hljs-comment">-- This implementation is designed for extensibility,</span>
<span class="hljs-comment">-- as the list of tags can be easily edited, loaded from a file, etc.</span>
<span class="hljs-comment">-- Number range is set &gt;100 so as to demonstrate the FizzBuzzBaz case.</span>
<span class="hljs-title">fizzBuzz</span> i = <span class="hljs-keyword">if</span> null desc <span class="hljs-keyword">then</span> show i <span class="hljs-keyword">else</span> desc <span class="hljs-keyword">where</span>
  desc = concat [label | (j,label) &lt;- tags, <span class="hljs-number">0</span> == rem i j]
  tags = [ (<span class="hljs-number">3</span>,<span class="hljs-string">&quot;Fizz&quot;</span>), (<span class="hljs-number">5</span>,<span class="hljs-string">&quot;Buzz&quot;</span>), (<span class="hljs-number">7</span>,<span class="hljs-string">&quot;Baz&quot;</span>) ]

<span class="hljs-title">main</span> = mapM<em> (putStrLn . fizzBuzz) [<span class="hljs-number">1.</span><span class="hljs-number">.120</span>]


<span class="hljs-comment">-- don&#39;t know if this works, but looks not nice.</span>
<span class="hljs-module"><span class="hljs-keyword">module</span> Main <span class="hljs-keyword">where</span></span>

  main :: <span class="hljs-type">IO</span> ()
  main = <span class="hljs-keyword">do</span>
    mapM</em> (putStrLn) [fizzBuzz x | x &lt; [<span class="hljs-number">0.</span><span class="hljs-number">.100</span>]]

    fizz :: <span class="hljs-type">Int</span> -&gt; <span class="hljs-type">String</span>
    fizz x = <span class="hljs-keyword">if</span> x <code>mod</code> <span class="hljs-number">3</span> == <span class="hljs-number">0</span> <span class="hljs-keyword">then</span> <span class="hljs-string">&quot;fizz&quot;</span> <span class="hljs-keyword">else</span> <span class="hljs-string">&quot;&quot;</span>

    buzz :: <span class="hljs-type">Int</span> -&gt; <span class="hljs-type">String</span>
    buzz x = <span class="hljs-keyword">if</span> x <code>mod</code> <span class="hljs-number">5</span> == <span class="hljs-number">0</span> <span class="hljs-keyword">then</span> <span class="hljs-string">&quot;buzz&quot;</span> <span class="hljs-keyword">else</span> <span class="hljs-string">&quot;&quot;</span>

    fizzBuzz :: <span class="hljs-type">Int</span> -&gt; <span class="hljs-type">String</span>
    fizzBuzz x = <span class="hljs-keyword">if</span> fizz(x) ++ buzz(x) == <span class="hljs-string">&quot;&quot;</span>
                    <span class="hljs-keyword">then</span> show x
                    <span class="hljs-keyword">else</span> fizz(x) ++ buzz(x)


<span class="hljs-comment">{-
Fizz comes before Buzz comes before an integer. Fizz and Buzz stick to each other, but hide integers.
The lists for Fizz and Buzz are infinite, but zipping together with a finite list of integers,
the result is finite.
-}</span>

<span class="hljs-module"><span class="hljs-keyword">module</span> Main <span class="hljs-keyword">where</span></span>

<span class="hljs-title">main</span> :: <span class="hljs-type">IO</span> ()
<span class="hljs-title">main</span> = mapM<em> putStrLn $ zipWith3 join (loop <span class="hljs-number">3</span> <span class="hljs-string">&quot;Fizz&quot;</span>) (loop <span class="hljs-number">5</span> <span class="hljs-string">&quot;Buzz&quot;</span>) [<span class="hljs-number">1.</span><span class="hljs-number">.100</span>]
  <span class="hljs-keyword">where</span>
    xor s t = <span class="hljs-keyword">if</span> null s <span class="hljs-keyword">then</span> t <span class="hljs-keyword">else</span> s
    loop n s = cycle $ replicate (n-<span class="hljs-number">1</span>) [] ++ [s]
    join s t n = xor (s ++ t) (show n)

<span class="hljs-comment">{-
If one has enabled all warnings as errors, then the integers need an explicit type, as shown below.
The hiding logic can also be implemented by filtering for the first non-null element of a list:
-}</span>

<span class="hljs-module"><span class="hljs-keyword">module</span> Main <span class="hljs-keyword">where</span></span>
  <span class="hljs-module"><span class="hljs-keyword">module</span> Main <span class="hljs-keyword">where</span></span>

  main :: <span class="hljs-type">IO</span> ()
  main = sequence</em> $ zipWith3 join (loop <span class="hljs-number">3</span> <span class="hljs-string">&quot;Fizz&quot;</span>) (loop <span class="hljs-number">5</span> <span class="hljs-string">&quot;Buzz&quot;</span>) [<span class="hljs-number">1.</span><span class="hljs-number">.100</span> :: <span class="hljs-type">Int</span>]
    <span class="hljs-keyword">where</span>
      loop n s = cycle $ replicate (n-<span class="hljs-number">1</span>) <span class="hljs-string">&quot;&quot;</span> ++ [s]
      join s t n = putStrLn . head $ filter (not . null) [s ++ t, show n]</code></pre><h2 id="javascript">javascript</h2>
<pre class="hljs"><code>
<span class="hljs-keyword">for</span>(x=<span class="hljs-number">0</span>;x++&lt;<span class="hljs-number">100</span>;)console.log(x%<span class="hljs-number">3</span>||<span class="hljs-string">&#39;fizz&#39;</span>,x%<span class="hljs-number">5</span>||<span class="hljs-string">&#39;buzz&#39;</span>)

<span class="hljs-comment">////</span>

<span class="hljs-keyword">var</span>
  words = []
, func = <span class="hljs-keyword">null</span>
, l    = <span class="hljs-number">100</span>

<span class="hljs-keyword">var</span> conditions = {
  <span class="hljs-number">1</span>  : {
    <span class="hljs-keyword">true</span>  : <span class="hljs-keyword">null</span>
  , <span class="hljs-keyword">false</span> : <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(i)</span> </span>{
      <span class="hljs-keyword">return</span> <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">()</span> </span>{
        console.log(i)
      }
    }
  }
, <span class="hljs-number">3</span>  : {
    <span class="hljs-keyword">true</span>  : <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">()</span> </span>{
      <span class="hljs-keyword">return</span> func;
    }
  , <span class="hljs-keyword">false</span> : <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">()</span> </span>{
      <span class="hljs-keyword">return</span> <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">()</span> </span>{
        console.log(<span class="hljs-string">&#39;fizz&#39;</span>)
      }
    }
  }
, <span class="hljs-number">5</span>  : {
    <span class="hljs-keyword">true</span>  : <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">()</span> </span>{
      <span class="hljs-keyword">return</span> func
    }
  , <span class="hljs-keyword">false</span> : <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">()</span> </span>{
      <span class="hljs-keyword">return</span> <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">()</span> </span>{
        console.log(<span class="hljs-string">&#39;buzz&#39;</span>)
      }
    }
  }
, <span class="hljs-number">15</span> : {
    <span class="hljs-keyword">true</span>  : <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">()</span> </span>{
      <span class="hljs-keyword">return</span> func
    }
  , <span class="hljs-keyword">false</span> : <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">()</span> </span>{
      <span class="hljs-keyword">return</span> <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">()</span> </span>{
        console.log(<span class="hljs-string">&#39;fizzbuzz&#39;</span>)
      }
    }
  }
}

<span class="hljs-keyword">for</span> (l = <span class="hljs-number">1</span>; l &lt; <span class="hljs-number">100</span>; l++) {
  <span class="hljs-keyword">for</span> (<span class="hljs-keyword">var</span> thing in conditions) {
    <span class="hljs-keyword">var</span> result = l % thing
    func = conditions[thing]<a href="l">!!result</a>
  }
  func()
}

<span class="hljs-comment">////</span>

Object.keys(<span class="hljs-keyword">new</span> Int8Array(<span class="hljs-number">100</span>))
.map(x      =&gt; ((++x % <span class="hljs-number">3</span>  ==  <span class="hljs-number">0</span>) ? f = <span class="hljs-string">&#39;fizz&#39;</span> : x))
.map((x, i) =&gt; ((++i % <span class="hljs-number">5</span>  ==  <span class="hljs-number">0</span>) ? b = <span class="hljs-string">&#39;buzz&#39;</span> : x))
.map((x, i) =&gt; ((++i % <span class="hljs-number">15</span> === <span class="hljs-number">0</span>) ? f + b : x))

<span class="hljs-comment">////</span>

<span class="hljs-comment">// this is basically the same as the usual solution, just sorta recursive also</span>
<span class="hljs-keyword">const</span> fizzBuzz = num =&gt; {
  <span class="hljs-keyword">if</span> (num % <span class="hljs-number">3</span> === <span class="hljs-number">0</span> &amp;&amp; num % <span class="hljs-number">5</span> === <span class="hljs-number">0</span>) {
    console.log(<span class="hljs-string">&#39;FizzBuzz&#39;</span>)
  } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (num % <span class="hljs-number">3</span> === <span class="hljs-number">0</span>) {
    console.log(<span class="hljs-string">&#39;Fizz&#39;</span>)
  } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (num % <span class="hljs-number">5</span> === <span class="hljs-number">0</span>) {
    console.log(<span class="hljs-string">&#39;Buzz&#39;</span>)
  } <span class="hljs-keyword">else</span> {
    console.log(num)
  }
  <span class="hljs-keyword">if</span> (num &lt; <span class="hljs-number">100</span>) {
    <span class="hljs-keyword">let</span> newNum = num + <span class="hljs-number">1</span>
    fizzBuzz(newNum)
  }
}
fizzBuzz(<span class="hljs-number">1</span>)

<span class="hljs-comment">////</span>

<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">fizzbuzz</span><span class="hljs-params">(num, fizz, buzz)</span> </span>{
  <span class="hljs-keyword">for</span> (<span class="hljs-keyword">var</span> i = <span class="hljs-number">1</span>; i &lt;= num; i++) {
    <span class="hljs-keyword">if</span> (i % (fizz <em> buzz) === <span class="hljs-number">0</span>) {
      console.log(<span class="hljs-string">&#39;FizzBuzz&#39;</span>)
    } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (i % buzz === <span class="hljs-number">0</span>) {
      console.log(<span class="hljs-string">&#39;Buzz&#39;</span>)
    } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (i % fizz === <span class="hljs-number">0</span>) {
      console.log(<span class="hljs-string">&#39;Fizz&#39;</span>)
    } <span class="hljs-keyword">else</span> {
      console.log(i)
    }
  }
}
fizzbuzz(<span class="hljs-number">100</span>, <span class="hljs-number">3</span>, <span class="hljs-number">5</span>)

<span class="hljs-comment">////</span>

<span class="hljs-keyword">for</span> (<span class="hljs-keyword">let</span> i = <span class="hljs-number">1</span>; i &lt;= <span class="hljs-number">100</span>; i++) {
  <span class="hljs-keyword">let</span>
    mod3   = i % <span class="hljs-number">3</span> === <span class="hljs-number">0</span>
  , mod5   = i % <span class="hljs-number">5</span> === <span class="hljs-number">0</span>
  , result = mod3 &amp;&amp; mod5 ? <span class="hljs-string">&#39;fizzbuzz&#39;</span> : mod3 ? <span class="hljs-string">&#39;fizz&#39;</span> : mod5 ? <span class="hljs-string">&#39;buzz&#39;</span> : i
  console.log(result)
}

<span class="hljs-comment">////</span>

<span class="hljs-keyword">let</span> counter = <span class="hljs-number">0</span>

<span class="hljs-keyword">while</span> (counter &lt; <span class="hljs-number">100</span>) {
  counter = counter + <span class="hljs-number">1</span>
  <span class="hljs-keyword">if</span> (counter % <span class="hljs-number">3</span> === <span class="hljs-number">0</span> &amp;&amp; counter % <span class="hljs-number">5</span> === <span class="hljs-number">0</span>) {
    console.log(<span class="hljs-string">&#39;FizzBuzz&#39;</span>)
  } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (counter % <span class="hljs-number">3</span> === <span class="hljs-number">0</span>) {
    console.log(<span class="hljs-string">&#39;Fizz&#39;</span>)
  } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (counter % <span class="hljs-number">5</span> === <span class="hljs-number">0</span>) {
    console.log(<span class="hljs-string">&#39;Buzz&#39;</span>)
  } <span class="hljs-keyword">else</span> {
    console.log(counter)
  }
}

<span class="hljs-comment">////</span>

<span class="hljs-keyword">let</span>
  div = ((n, s) =&gt; i =&gt; i % n ? <span class="hljs-string">&#39;&#39;</span> : s)
, f = div(<span class="hljs-number">3</span>,<span class="hljs-string">&#39;fizz&#39;</span>)
, b = div(<span class="hljs-number">5</span>,<span class="hljs-string">&#39;buzz&#39;</span>)
, loop = fn =&gt; i =&gt; i &gt; <span class="hljs-number">0</span> &amp;&amp; loop(fn)(i - <span class="hljs-number">1</span>) || fn(i)
, fizzbuzz = loop(i =&gt; console.log(f(i) + b(i) || i))
fizzbuzz(<span class="hljs-number">100</span>)

<span class="hljs-comment">// (or)</span>

<span class="hljs-keyword">let</span>
  div = ((n, s) =&gt; i =&gt; i % n ? <span class="hljs-string">&#39;&#39;</span> : s)
, f = div(<span class="hljs-number">3</span>,<span class="hljs-string">&#39;fizz&#39;</span>)
, b = div(<span class="hljs-number">5</span>,<span class="hljs-string">&#39;buzz&#39;</span>)
, fizzbuzz = i =&gt; i &gt; <span class="hljs-number">0</span> &amp;&amp; fizzbuzz((i - <span class="hljs-number">1</span>)) || console.log(f(i) + b(i) || i)
fizzbuzz(<span class="hljs-number">100</span>)

<span class="hljs-comment">////</span>

<span class="hljs-comment">// this may or may not continue to work in firefox</span>
<span class="hljs-comment">// it may not ever work anywhere else; list comprehensions were</span>
<span class="hljs-comment">// removed from es2015 drafts.</span>
console.log(
  [<span class="hljs-keyword">for</span> (i of <span class="hljs-keyword">Array</span>(<span class="hljs-number">100</span>).keys())
    (++i % <span class="hljs-number">3</span> ? <span class="hljs-string">&#39;&#39;</span> : <span class="hljs-string">&#39;fizz&#39;</span>) + (i % <span class="hljs-number">5</span> ? <span class="hljs-string">&#39;&#39;</span> : <span class="hljs-string">&#39;buzz&#39;</span>) || i]
  .join(<span class="hljs-string">&#39;\n&#39;</span>)
)

<span class="hljs-comment">////</span>


<span class="hljs-keyword">for</span>(i=<span class="hljs-number">0</span>;++i&lt;<span class="hljs-number">101</span>;)console.log((i%<span class="hljs-number">3</span>?<span class="hljs-string">&#39;&#39;</span>:<span class="hljs-string">&#39;Fizz&#39;</span>)+(i%<span class="hljs-number">5</span>?<span class="hljs-string">&#39;&#39;</span>:<span class="hljs-string">&#39;Buzz&#39;</span>)||i)

<span class="hljs-comment">////</span>

<span class="hljs-keyword">for</span>(i=<span class="hljs-number">1</span>;i&lt;<span class="hljs-number">101</span>;i++)console.log((x=(i%<span class="hljs-number">3</span>?<span class="hljs-string">&#39;&#39;</span>:<span class="hljs-string">&#39;Fizz&#39;</span>)+(i%<span class="hljs-number">5</span>?<span class="hljs-string">&#39;&#39;</span>:<span class="hljs-string">&#39;Buzz&#39;</span>))?x:i)

<span class="hljs-comment">////</span>

a=b=!![]+![],a--,c=b+b;<span class="hljs-keyword">while</span>(++a)e=!(a%(c+c+b)),alert(!(a%(c+b))?e?<span class="hljs-string">&quot;FizzBuzz&quot;</span>:<span class="hljs-string">&quot;Fizz&quot;</span>:e?<span class="hljs-string">&quot;Buzz&quot;</span>:a);

<span class="hljs-comment">////</span>

<span class="hljs-keyword">for</span> (<span class="hljs-keyword">let</span> i = <span class="hljs-number">1</span>; i &lt; <span class="hljs-number">101</span>; i++) {
  console.log([i, <span class="hljs-string">&#39;fizz&#39;</span>, <span class="hljs-string">&#39;buzz&#39;</span>, <span class="hljs-string">&#39;fizzbuzz&#39;</span>][(i % <span class="hljs-number">3</span> === <span class="hljs-number">0</span>) + <span class="hljs-number">2</span> </em> ( i % <span class="hljs-number">5</span> === <span class="hljs-number">0</span>)])
}

<span class="hljs-comment">////</span>

<span class="hljs-keyword">const</span> numGen = i =&gt; i ? numGen(i - <span class="hljs-number">1</span>).concat(i) : []

numGen(<span class="hljs-number">100</span>).map(n =&gt; n % <span class="hljs-number">3</span> ?
      (n % <span class="hljs-number">5</span> ? n : <span class="hljs-string">&#39;Buzz&#39;</span>) :
      (n % <span class="hljs-number">5</span> ? <span class="hljs-string">&#39;Fizz&#39;</span> : <span class="hljs-string">&#39;FizzBuzz&#39;</span>))

<span class="hljs-comment">////</span>

<span class="hljs-keyword">for</span> (<span class="hljs-keyword">let</span> i = <span class="hljs-number">1</span>; i &lt;= <span class="hljs-number">100</span>; i++) {
  <span class="hljs-keyword">let</span>
    fizz = (!(i%<span class="hljs-number">3</span>)) ? <span class="hljs-string">&#39;Fizz&#39;</span> : <span class="hljs-string">&#39;&#39;</span>
  , buzz = (!(i%<span class="hljs-number">5</span>)) ? fizz + <span class="hljs-string">&#39;Buzz&#39;</span> : fizz
  console.log((buzz) ? buzz : i)
}

<span class="hljs-comment">////</span>

<span class="hljs-keyword">let</span> o, i

<span class="hljs-keyword">for</span> (i = <span class="hljs-number">1</span>; i &lt;= <span class="hljs-number">100</span>; i++) {
  o = <span class="hljs-string">&#39;&#39;</span>
  i % <span class="hljs-number">3</span> === <span class="hljs-number">0</span> ? o += <span class="hljs-string">&#39;fizz&#39;</span> : o
  i % <span class="hljs-number">5</span> === <span class="hljs-number">0</span> ? o += <span class="hljs-string">&#39;buzz&#39;</span> : o
  o === <span class="hljs-string">&#39;&#39;</span> ? o = i : o
  console.log(o)
}

<span class="hljs-comment">////</span>

<span class="hljs-keyword">for</span> (<span class="hljs-keyword">let</span> i = <span class="hljs-number">1</span>; i &lt;= <span class="hljs-number">100</span>; i++) {
  console.log({
    truefalse : <span class="hljs-string">&#39;Fizz&#39;</span>
  , falsetrue : <span class="hljs-string">&#39;Buzz&#39;</span>
  , truetrue  : <span class="hljs-string">&#39;FizzBuzz&#39;</span>
  }[(i % <span class="hljs-number">3</span> == <span class="hljs-number">0</span>) + <span class="hljs-string">&#39;&#39;</span> + ( i % <span class="hljs-number">5</span> == <span class="hljs-number">0</span>)] || i)
}

<span class="hljs-comment">////</span>

(<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">numGen</span><span class="hljs-params">(i)</span></span>{
  <span class="hljs-keyword">return</span> i ? numGen(i - <span class="hljs-number">1</span>).concat(i) : []
})(<span class="hljs-number">100</span>).map(<span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(n)</span></span>{
  <span class="hljs-keyword">return</span> n % <span class="hljs-number">3</span> ?
    (n % <span class="hljs-number">5</span> ? n : <span class="hljs-string">&#39;Buzz&#39;</span>) :
    (n % <span class="hljs-number">5</span> ? <span class="hljs-string">&#39;Fizz&#39;</span> : <span class="hljs-string">&#39;FizzBuzz&#39;</span>)
}).join(<span class="hljs-string">&#39; &#39;</span>)

<span class="hljs-comment">////</span>

<span class="hljs-keyword">let</span> f, b, fb, n

<span class="hljs-keyword">for</span> (n = <span class="hljs-number">1</span>; n &lt;= <span class="hljs-number">100</span>; n++) {
  f  = !(n % <span class="hljs-number">3</span>)
  b  = !(n % <span class="hljs-number">5</span>)
  fb = f &amp;&amp; b
  console.log(
    fb ? <span class="hljs-string">&#39;fizzbuzz&#39;</span> :
   (f  ? <span class="hljs-string">&#39;fizz&#39;</span>     :
    b  ? <span class="hljs-string">&#39;buzz&#39;</span>     :
    n))
}

<span class="hljs-comment">////</span>

<span class="hljs-keyword">const</span> fizzBuzz = () =&gt; {
  <span class="hljs-keyword">let</span> i, output
  <span class="hljs-keyword">for</span> (i = <span class="hljs-number">1</span>; i &lt; <span class="hljs-number">101</span>; i += <span class="hljs-number">1</span>) {
    output = <span class="hljs-string">&#39;&#39;</span>
    <span class="hljs-keyword">if</span> (!(i % <span class="hljs-number">3</span>)) {
      output += <span class="hljs-string">&#39;Fizz&#39;</span>
    }
    <span class="hljs-keyword">if</span> (!(i % <span class="hljs-number">5</span>)) {
      output += <span class="hljs-string">&#39;Buzz&#39;</span>
    }
    console.log(output || i)
  }
}

<span class="hljs-comment">////</span>

<span class="hljs-keyword">const</span> word = x =&gt; {
  <span class="hljs-keyword">if</span> (!(x % <span class="hljs-number">15</span>)) {
    <span class="hljs-keyword">return</span> <span class="hljs-string">&#39;fizzbuzz&#39;</span>
  } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (!(x % <span class="hljs-number">3</span>)) {
    <span class="hljs-keyword">return</span> <span class="hljs-string">&#39;fiz&#39;</span>
  } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (!(x % <span class="hljs-number">5</span>)) {
    <span class="hljs-keyword">return</span> <span class="hljs-string">&#39;buzz&#39;</span>
  } <span class="hljs-keyword">else</span> {
    <span class="hljs-keyword">return</span> x
  }
}

<span class="hljs-keyword">const</span> fb = max =&gt; <span class="hljs-keyword">Array</span>
  .apply(<span class="hljs-keyword">null</span>, {length : max + <span class="hljs-number">1</span>})
  .map(Number.call, Number)
  .splice(<span class="hljs-number">1</span>)
  .map(word)

<span class="hljs-comment">////</span>

<span class="hljs-function"><span class="hljs-keyword">function</span><em> <span class="hljs-title">FizzBuzz</span><span class="hljs-params">()</span> </span>{
  <span class="hljs-keyword">let</span> idx = <span class="hljs-number">0</span>
  <span class="hljs-keyword">while</span> (<span class="hljs-keyword">true</span>) {
    <span class="hljs-keyword">let</span> val = <span class="hljs-string">&#39;&#39;</span>
    idx++
    <span class="hljs-keyword">if</span> (idx % <span class="hljs-number">3</span> === <span class="hljs-number">0</span>) {
      val += <span class="hljs-string">&#39;Fizz&#39;</span>
    }
    <span class="hljs-keyword">if</span> (idx % <span class="hljs-number">5</span> === <span class="hljs-number">0</span>) {
      val += <span class="hljs-string">&#39;Buzz&#39;</span>
    }
    <span class="hljs-keyword">yield</span> val || idx
  }
}

<span class="hljs-keyword">let</span> fb = FizzBuzz()

<span class="hljs-keyword">for</span> (<span class="hljs-keyword">let</span> i = <span class="hljs-number">0</span>; i &lt; <span class="hljs-number">100</span>; i++) {
  console.log(fb.next().val)
}

<span class="hljs-comment">////</span>

<span class="hljs-keyword">const</span> range = n =&gt; [...<span class="hljs-keyword">Array</span>(n).keys()]

<span class="hljs-keyword">const</span> fbTest = n =&gt; {
  <span class="hljs-keyword">let</span>
    by3 = n % <span class="hljs-number">3</span> === <span class="hljs-number">0</span>
  , by5 = n % <span class="hljs-number">5</span> === <span class="hljs-number">0</span>

  <span class="hljs-keyword">return</span> by3 &amp;&amp; by5 ? <span class="hljs-string">&#39;fizz buzz&#39;</span> :
                by3 ? <span class="hljs-string">&#39;fizz&#39;</span>      :
                by5 ? <span class="hljs-string">&#39;buzz&#39;</span>      :
                n
}

<span class="hljs-keyword">const</span> fizzBuzz = n =&gt; range(n).map(x =&gt; fbTest(x + <span class="hljs-number">1</span>)).join(<span class="hljs-string">&#39;, &#39;</span>)

console.log(fizzBuzz(<span class="hljs-number">100</span>))

<span class="hljs-comment">////</span>

<span class="hljs-comment">// this (or a slight variation on this) is easily the most common solution</span>

<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">fizz_buzz</span><span class="hljs-params">(num)</span></span>{
  <span class="hljs-keyword">if</span> (num % <span class="hljs-number">15</span> == <span class="hljs-number">0</span>) {
    console.log(<span class="hljs-string">&#39;FizzBuzz&#39;</span>)
  } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (num % <span class="hljs-number">5</span> == <span class="hljs-number">0</span>) {
    console.log(<span class="hljs-string">&#39;Buzz&#39;</span>)
  } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (num % <span class="hljs-number">3</span> == <span class="hljs-number">0</span>) {
    console.log(<span class="hljs-string">&#39;Fizz&#39;</span>)
  } <span class="hljs-keyword">else</span> {
    console.log(num)
  }
}

<span class="hljs-keyword">for</span> (<span class="hljs-keyword">let</span> i = <span class="hljs-number">0</span>; i &lt;= <span class="hljs-number">100</span>; i++) {
  fizz_buzz(i)
}

<span class="hljs-comment">////</span>

<span class="hljs-comment">#!/usr/bin/env node</span>

<span class="hljs-keyword">const</span> max = process.argv[<span class="hljs-number">2</span>]

<span class="hljs-keyword">let</span> FizzBuzz = <span class="hljs-function"><span class="hljs-keyword">function</span></em> <span class="hljs-params">()</span></span>{
  <span class="hljs-keyword">let</span> num = <span class="hljs-number">1</span>
  <span class="hljs-keyword">while</span> (num &lt;= max){
    <span class="hljs-keyword">let</span> value = num
    num++
    <span class="hljs-keyword">if</span> (value % <span class="hljs-number">15</span> === <span class="hljs-number">0</span>) {
      value = <span class="hljs-string">&#39;FizzBuzz&#39;</span>
    } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (value % <span class="hljs-number">3</span> === <span class="hljs-number">0</span>) {
      value = <span class="hljs-string">&#39;Fizz&#39;</span>
    } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (value % <span class="hljs-number">5</span> === <span class="hljs-number">0</span>) {
      value = <span class="hljs-string">&#39;Buzz&#39;</span>
    }
    <span class="hljs-keyword">yield</span> value
  }
}()

<span class="hljs-keyword">for</span> (<span class="hljs-keyword">let</span> n of FizzBuzz){
  console.log(n)
}

<span class="hljs-comment">////</span>

<span class="hljs-keyword">const</span> fb = n =&gt; {
  <span class="hljs-keyword">switch</span>(<span class="hljs-keyword">true</span>) {
    <span class="hljs-keyword">case</span> item % <span class="hljs-number">15</span> === <span class="hljs-number">0</span>:
      console.log(<span class="hljs-string">&#39;fizbuzz&#39;</span>)
      <span class="hljs-keyword">break</span>
    <span class="hljs-keyword">case</span> item % <span class="hljs-number">3</span> === <span class="hljs-number">0</span>:
      console.log(<span class="hljs-string">&#39;fizz&#39;</span>)
      <span class="hljs-keyword">break</span>
    <span class="hljs-keyword">case</span> item % <span class="hljs-number">5</span> === <span class="hljs-number">0</span>:
      console.log(<span class="hljs-string">&#39;buzz&#39;</span>)
      <span class="hljs-keyword">break</span>
    <span class="hljs-keyword">default</span>:
      console.log(n)
      <span class="hljs-keyword">break</span>
  }
}

<span class="hljs-keyword">const</span> nums = <span class="hljs-keyword">Array</span>.apply(<span class="hljs-keyword">null</span>, <span class="hljs-keyword">Array</span>(<span class="hljs-number">100</span>)).map(() =&gt; Math.round(Math.random() <em> <span class="hljs-number">100</span>) + <span class="hljs-number">1</span>)

nums.map(fb)

<span class="hljs-comment">////</span>

<span class="hljs-keyword">const</span> a = {fizz : <span class="hljs-number">3</span>, buzz : <span class="hljs-number">5</span>}

<span class="hljs-keyword">for</span> (<span class="hljs-keyword">let</span> b = <span class="hljs-number">1</span>; b &lt;= <span class="hljs-number">100</span>; b++) {
  <span class="hljs-keyword">let</span> c = <span class="hljs-string">&#39;&#39;</span>
  <span class="hljs-keyword">for</span> (<span class="hljs-keyword">let</span> d in a) {
    c += b % a[d] ? <span class="hljs-string">&#39;&#39;</span> : d
  }
  console.log(c ? c : b)
}

<span class="hljs-comment">// this is nice because you can fizz buzz bing boom zing easily</span>
<span class="hljs-keyword">const</span> a = {
  fizz : <span class="hljs-number">3</span>
, buzz : <span class="hljs-number">5</span>
, bing : <span class="hljs-number">7</span>
, boom : <span class="hljs-number">11</span>
, zing : <span class="hljs-number">13</span>
}

<span class="hljs-keyword">for</span> (<span class="hljs-keyword">let</span> b = <span class="hljs-number">1</span>; b &lt;= <span class="hljs-number">1000</span>; b++) {
  <span class="hljs-keyword">let</span> c = <span class="hljs-string">&#39;&#39;</span>
  <span class="hljs-keyword">for</span> (<span class="hljs-keyword">let</span> d in a) {
    c += b % a[d] ? <span class="hljs-string">&#39;&#39;</span> : d
  }
  console.log(c ? c : b)
}

<span class="hljs-comment">////</span>

<span class="hljs-comment">// this is cheating</span>
alert(<span class="hljs-string">&#39;1 2 Fizz 4 Buzz Fizz 7 8 Fizz Buzz 11 Fizz 13 14 FizzBuzz 16 17 Fizz 19 Buzz Fizz 22 23 Fizz Buzz 26 Fizz 28 29 FizzBuzz 31 32 Fizz 34 Buzz Fizz 37 38 Fizz Buzz 41 Fizz 43 44 FizzBuzz 46 47 Fizz 49 Buzz Fizz 52 53 Fizz Buzz 56 Fizz 58 59 FizzBuzz 61 62 Fizz 64 Buzz Fizz 67 68 Fizz Buzz 71 Fizz 73 74 FizzBuzz 76 77 Fizz 79 Buzz Fizz 82 83 Fizz Buzz 86 Fizz 88 89 FizzBuzz 91 92 Fizz 94 Buzz Fizz 97 98 Fizz Buzz&#39;</span>)

<span class="hljs-comment">////</span>

<span class="hljs-comment">#!/usr/bin/env node</span>

<span class="hljs-keyword">const</span> max = +process.argv[<span class="hljs-number">2</span>]

<span class="hljs-keyword">let</span> FizzBuzz = {
  <a href="">Symbol.iterator</a> {
    <span class="hljs-keyword">let</span> num = <span class="hljs-number">1</span>
    <span class="hljs-keyword">return</span> {
      next() {
        <span class="hljs-keyword">if</span> (num &gt; max) {
          <span class="hljs-keyword">return</span> {
            done : <span class="hljs-keyword">true</span>
          }
        }
        <span class="hljs-keyword">let</span> value = num
        <span class="hljs-keyword">if</span> (value % <span class="hljs-number">15</span> === <span class="hljs-number">0</span>) {
          value = <span class="hljs-string">&#39;FizzBuzz&#39;</span>
        } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (value % <span class="hljs-number">3</span> === <span class="hljs-number">0</span>) {
          value = <span class="hljs-string">&#39;Fizz&#39;</span>
        } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (value % <span class="hljs-number">5</span> === <span class="hljs-number">0</span>) {
          value = <span class="hljs-string">&#39;Buzz&#39;</span>
        }
        num++
        <span class="hljs-keyword">return</span> {
          done  : <span class="hljs-keyword">false</span>
        , value : value
        }
      }
    }
  }
}

<span class="hljs-keyword">for</span> (<span class="hljs-keyword">let</span> n of FizzBuzz) {
  console.log(n)
}

<span class="hljs-comment">////</span>

<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">fizzbuzz</span><span class="hljs-params">()</span> </span>{
  <span class="hljs-keyword">let</span>
    i      = <span class="hljs-number">1</span>
  , result = []

  ;(<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">loop</span><span class="hljs-params">()</span> </span>{
    <span class="hljs-keyword">let</span> str = <span class="hljs-string">&#39;&#39;</span>
    str += fizz(i)
    str += buzz(i)
    result.push(ifFalsy(str, i))
    <span class="hljs-keyword">if</span> (isLt100(i++)) {
      loop()
    }
  })()
  <span class="hljs-keyword">print</span>(result.join(<span class="hljs-string">&#39;, &#39;</span>))
}

<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">fizz</span><span class="hljs-params">(num)</span> </span>{
  <span class="hljs-keyword">return</span> isDivBy3(num) ? <span class="hljs-string">&#39;fizz&#39;</span> : <span class="hljs-string">&#39;&#39;</span>
}

<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">buzz</span><span class="hljs-params">(num)</span> </span>{
  <span class="hljs-keyword">return</span> isDivBy5(num) ? <span class="hljs-string">&#39;buzz&#39;</span> : <span class="hljs-string">&#39;&#39;</span>
}

<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">isDivBy3</span><span class="hljs-params">(num)</span> </span>{
  <span class="hljs-keyword">return</span> num % <span class="hljs-number">3</span> === <span class="hljs-number">0</span>
}

<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">isDivBy5</span><span class="hljs-params">(num)</span> </span>{
  <span class="hljs-keyword">return</span> num % <span class="hljs-number">5</span> === <span class="hljs-number">0</span>
}

<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">isLt100</span><span class="hljs-params">(num)</span> </span>{
  <span class="hljs-keyword">return</span> num &lt; <span class="hljs-number">100</span>
}

<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">ifFalsy</span><span class="hljs-params">(value, fallback)</span> </span>{
  <span class="hljs-keyword">return</span> !value ? fallback : value
}

<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">print</span><span class="hljs-params">(str)</span> </span>{
  console.log(str)
}

fizzbuzz()

<span class="hljs-comment">////</span>

<span class="hljs-keyword">const</span> NumbersFromOne = {
  </em>[Symbol.iterator] () {
    <span class="hljs-keyword">for</span> (<span class="hljs-keyword">let</span> i = <span class="hljs-number">1</span>;; ++i) {
      <span class="hljs-keyword">yield</span> i
    }
  }
}

<span class="hljs-keyword">const</span> take = <span class="hljs-function"><span class="hljs-keyword">function</span><em> <span class="hljs-params">(numberToTake, iterable)</span> </span>{
  <span class="hljs-keyword">let</span> remaining = numberToTake

  <span class="hljs-keyword">for</span> (<span class="hljs-keyword">let</span> value of iterable) {
    <span class="hljs-keyword">if</span> (remaining-- &lt;= <span class="hljs-number">0</span>) {
      <span class="hljs-keyword">break</span>
    }
    <span class="hljs-keyword">yield</span> value
  }
}

<span class="hljs-keyword">const</span> replaceEvery = <span class="hljs-function"><span class="hljs-keyword">function</span></em> <span class="hljs-params">(period, replacement, iterable)</span> </span>{
  <span class="hljs-keyword">let</span> count = period

  <span class="hljs-keyword">for</span> (<span class="hljs-keyword">let</span> value of iterable) {
    <span class="hljs-keyword">if</span> (--count === <span class="hljs-number">0</span>) {
      <span class="hljs-keyword">yield</span> replacement
      count = period
    }
    <span class="hljs-keyword">else</span> <span class="hljs-keyword">yield</span> value
  }
}

<span class="hljs-keyword">const</span>
  oneTo100 = take(<span class="hljs-number">100</span>, NumbersFromOne)
, fizz     = replaceEvery(<span class="hljs-number">3</span>, <span class="hljs-string">&#39;fizz&#39;</span>, oneTo100)
, buzz     = replaceEvery(<span class="hljs-number">5</span>, <span class="hljs-string">&#39;buzz&#39;</span>, fizz)
, fizzbuzz = replaceEvery(<span class="hljs-number">15</span>, <span class="hljs-string">&#39;fizzbuzz&#39;</span>, buzz)

console.log(...fizzbuzz)

<span class="hljs-comment">////</span>

<span class="hljs-comment">// with tests</span>
<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">fizzbuzz</span><span class="hljs-params">(value)</span> </span>{
  <span class="hljs-keyword">if</span> (value % <span class="hljs-number">15</span> == <span class="hljs-number">0</span>) {
    <span class="hljs-keyword">return</span> <span class="hljs-string">&#39;fizzbuzz&#39;</span>
  } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (value % <span class="hljs-number">3</span> == <span class="hljs-number">0</span>) {
    <span class="hljs-keyword">return</span> <span class="hljs-string">&#39;fizz&#39;</span>
  } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (value % <span class="hljs-number">5</span> == <span class="hljs-number">0</span>) {
    <span class="hljs-keyword">return</span> <span class="hljs-string">&#39;buzz&#39;</span>
  }

  <span class="hljs-keyword">return</span> value
}

<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">assertEquals</span><span class="hljs-params">(expected, actual)</span> </span>{
  <span class="hljs-keyword">if</span> (expected !== actual) {
    console.error(<span class="hljs-string">&#39;Expected &#39;</span> + actual + <span class="hljs-string">&#39; to equal &#39;</span> + expected)
  }
}

;[<span class="hljs-number">15</span>, <span class="hljs-number">30</span>, <span class="hljs-number">45</span>, <span class="hljs-number">60</span>].<span class="hljs-keyword">forEach</span>(value =&gt; {
  assertEquals(<span class="hljs-string">&#39;fizzbuzz&#39;</span>, fizzbuzz(value))
})

;[<span class="hljs-number">3</span>, <span class="hljs-number">6</span>, <span class="hljs-number">9</span>, <span class="hljs-number">12</span>, <span class="hljs-number">18</span>, <span class="hljs-number">21</span>, <span class="hljs-number">24</span>, <span class="hljs-number">27</span>, <span class="hljs-number">33</span>].<span class="hljs-keyword">forEach</span>(value =&gt; {
  assertEquals(<span class="hljs-string">&#39;fizz&#39;</span>, fizzbuzz(value))
})

;[<span class="hljs-number">5</span>, <span class="hljs-number">10</span>, <span class="hljs-number">20</span>, <span class="hljs-number">25</span>, <span class="hljs-number">35</span>, <span class="hljs-number">40</span>].<span class="hljs-keyword">forEach</span>(value =&gt; {
  assertEquals(<span class="hljs-string">&#39;buzz&#39;</span>, fizzbuzz(value))
})

;[<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">4</span>, <span class="hljs-number">7</span>, <span class="hljs-number">8</span>, <span class="hljs-number">11</span>].<span class="hljs-keyword">forEach</span>(value =&gt; {
  assertEquals(value, fizzbuzz(value))
})

<span class="hljs-keyword">for</span> (<span class="hljs-keyword">let</span> i = <span class="hljs-number">1</span>; i &lt;= <span class="hljs-number">100</span>; i++) {
  console.log(fizzbuzz(i))
}

<span class="hljs-comment">////</span>

<span class="hljs-comment">// this one is CLOSE but not quite there!</span>
<em>=$=+!![];$__=((</em>$={})+<span class="hljs-string">&#39;&#39;</span>)[<em>+$+</em>+$+<em>];__$=((![])+<span class="hljs-string">&#39;&#39;</span>)[$];</em>$<em>=((</em>$={})+<span class="hljs-string">&#39;&#39;</span>)
[<em>+$+</em>+$+<em>+$];<strong>__=[][$</strong>+((</em>$={})+<span class="hljs-string">&#39;&#39;</span>)[$]+(($)/(![])+<span class="hljs-string">&#39;&#39;</span>)[$]+$<strong>+</strong>$+<em>$</em>];$<strong>$=(!![]+<span class="hljs-string">&quot;&quot;</span>)
[$+$+$]+([][(![]+<span class="hljs-string">&quot;&quot;</span>)[$+$+$]+(+[]+{})[$+$]+(!![]+<span class="hljs-string">&quot;&quot;</span>)[$]+(!![]+<span class="hljs-string">&quot;&quot;</span>)[+[]]]+<span class="hljs-string">&quot;&quot;</span>)[($+$)+<span class="hljs-string">&quot;&quot;</span>+
($+$+$)]+(![]+<span class="hljs-string">&quot;&quot;</span>)[$]+(![]+<span class="hljs-string">&quot;&quot;</span>)[$+$];$<em>$</em>=__</strong>()[$-$]<a href="span class=&quot;hljs-string&quot;&gt;&quot;\&quot;\\&quot;&lt;/span&gt;+($">$__$</a>+($+$+$+$+$+$+$)+
($+$)+<span class="hljs-string">&quot;\&quot;&quot;</span>);<em>$=(![]+<span class="hljs-string">&#39;&#39;</span>)[$-$]+([][[]]+[])[$+$+$+$+$]+$</em>$<em>+$</em>$<em>;$</em>=(<em>+{})[$+$+$]+(!![]+<span class="hljs-string">&#39;&#39;</span>)
[</em>+$]+$<em>$</em>+$<em>$</em>;<em>--,$$=$+$;<strong>__()[$-$][$</strong>$]((![]+<span class="hljs-string">&quot;&quot;</span>)[+[]]+(+[]+{})[$+$]+(!![]+<span class="hljs-string">&quot;&quot;</span>)[$]+
<span class="hljs-string">&quot;(;++</em>;)$$$=!(<em>%(&quot;</span>+($$+$$+$)+<span class="hljs-string">&quot;)),<strong>__()[+[]][</strong>$+((![])+&#39;&#39;)[&quot;</span>+($+$)+<span class="hljs-string">&quot;]+((!![])+&#39;&#39;)[&quot;</span>+
($+$+$)+<span class="hljs-string">&quot;]+((!![])+&#39;&#39;)[+!![]]+</em>$<em>](!(</em>%(&quot;</span>+($$+$)+<span class="hljs-string">&quot;))?$$$?<em>$+$</em>:<em>$:$$$?$</em>:_);&quot;</span>);</code></pre><h2 id="and-finally-in-html-and-css">and finally, in html and css</h2>
<pre class="hljs"><code><span class="hljs-doctype">&lt;!doctype html&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-title">html</span> <span class="hljs-attribute">lang</span>=<span class="hljs-value">&quot;en&quot;</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-title">head</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-title">title</span>&gt;</span>fizzbuzz<span class="hljs-tag">&lt;/<span class="hljs-title">title</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-title">style</span> <span class="hljs-attribute">type</span>=<span class="hljs-value">&quot;text/css&quot;</span>&gt;</span><span class="css">
      <span class="hljs-tag">ul</span> <span class="hljs-rules">{ <span class="hljs-rule"><span class="hljs-attribute">list-style-type</span>:<span class="hljs-value"> none</span></span>; }</span>
      <span class="hljs-tag">li</span><span class="hljs-pseudo">:nth-child(3n)</span>, <span class="hljs-tag">li</span><span class="hljs-pseudo">:nth-child(5n)</span> <span class="hljs-rules">{ <span class="hljs-rule"><span class="hljs-attribute">font-size</span>:<span class="hljs-value"> <span class="hljs-number">0px</span></span></span>; }</span>
      <span class="hljs-tag">li</span><span class="hljs-pseudo">:nth-child(3n)</span><span class="hljs-pseudo">:before</span> <span class="hljs-rules">{ <span class="hljs-rule"><span class="hljs-attribute">font-size</span>:<span class="hljs-value"> <span class="hljs-number">16px</span></span></span>; <span class="hljs-rule"><span class="hljs-attribute">content</span>:<span class="hljs-value"> <span class="hljs-string">&quot;Fizz&quot;</span></span></span>; }</span>
      <span class="hljs-tag">li</span><span class="hljs-pseudo">:nth-child(5n)</span><span class="hljs-pseudo">:after</span> <span class="hljs-rules">{ <span class="hljs-rule"><span class="hljs-attribute">font-size</span>:<span class="hljs-value"> <span class="hljs-number">16px</span></span></span>; <span class="hljs-rule"><span class="hljs-attribute">content</span>:<span class="hljs-value"> <span class="hljs-string">&quot;Buzz&quot;</span></span></span>; }</span>
    </span><span class="hljs-tag">&lt;/<span class="hljs-title">style</span>&gt;</span>
  <span class="hljs-tag">&lt;/<span class="hljs-title">head</span>&gt;</span>

  <span class="hljs-tag">&lt;<span class="hljs-title">body</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-title">ul</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-title">li</span>&gt;</span>1<span class="hljs-tag">&lt;/<span class="hljs-title">li</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-title">li</span>&gt;</span>2<span class="hljs-tag">&lt;/<span class="hljs-title">li</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-title">li</span>&gt;</span>3<span class="hljs-tag">&lt;/<span class="hljs-title">li</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-title">li</span>&gt;</span>4<span class="hljs-tag">&lt;/<span class="hljs-title">li</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-title">li</span>&gt;</span>5<span class="hljs-tag">&lt;/<span class="hljs-title">li</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-title">li</span>&gt;</span>6<span class="hljs-tag">&lt;/<span class="hljs-title">li</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-title">li</span>&gt;</span>7<span class="hljs-tag">&lt;/<span class="hljs-title">li</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-title">li</span>&gt;</span>8<span class="hljs-tag">&lt;/<span class="hljs-title">li</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-title">li</span>&gt;</span>9<span class="hljs-tag">&lt;/<span class="hljs-title">li</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-title">li</span>&gt;</span>10<span class="hljs-tag">&lt;/<span class="hljs-title">li</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-title">li</span>&gt;</span>11<span class="hljs-tag">&lt;/<span class="hljs-title">li</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-title">li</span>&gt;</span>12<span class="hljs-tag">&lt;/<span class="hljs-title">li</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-title">li</span>&gt;</span>13<span class="hljs-tag">&lt;/<span class="hljs-title">li</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-title">li</span>&gt;</span>14<span class="hljs-tag">&lt;/<span class="hljs-title">li</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-title">li</span>&gt;</span>15<span class="hljs-tag">&lt;/<span class="hljs-title">li</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-title">li</span>&gt;</span>16<span class="hljs-tag">&lt;/<span class="hljs-title">li</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-title">li</span>&gt;</span>17<span class="hljs-tag">&lt;/<span class="hljs-title">li</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-title">li</span>&gt;</span>18<span class="hljs-tag">&lt;/<span class="hljs-title">li</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-title">li</span>&gt;</span>19<span class="hljs-tag">&lt;/<span class="hljs-title">li</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-title">li</span>&gt;</span>20<span class="hljs-tag">&lt;/<span class="hljs-title">li</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-title">li</span>&gt;</span>21<span class="hljs-tag">&lt;/<span class="hljs-title">li</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-title">li</span>&gt;</span>22<span class="hljs-tag">&lt;/<span class="hljs-title">li</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-title">li</span>&gt;</span>23<span class="hljs-tag">&lt;/<span class="hljs-title">li</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-title">li</span>&gt;</span>24<span class="hljs-tag">&lt;/<span class="hljs-title">li</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-title">li</span>&gt;</span>25<span class="hljs-tag">&lt;/<span class="hljs-title">li</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-title">li</span>&gt;</span>26<span class="hljs-tag">&lt;/<span class="hljs-title">li</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-title">li</span>&gt;</span>27<span class="hljs-tag">&lt;/<span class="hljs-title">li</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-title">li</span>&gt;</span>28<span class="hljs-tag">&lt;/<span class="hljs-title">li</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-title">li</span>&gt;</span>29<span class="hljs-tag">&lt;/<span class="hljs-title">li</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-title">li</span>&gt;</span>30<span class="hljs-tag">&lt;/<span class="hljs-title">li</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-title">li</span>&gt;</span>31<span class="hljs-tag">&lt;/<span class="hljs-title">li</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-title">li</span>&gt;</span>32<span class="hljs-tag">&lt;/<span class="hljs-title">li</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-title">li</span>&gt;</span>33<span class="hljs-tag">&lt;/<span class="hljs-title">li</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-title">li</span>&gt;</span>34<span class="hljs-tag">&lt;/<span class="hljs-title">li</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-title">li</span>&gt;</span>35<span class="hljs-tag">&lt;/<span class="hljs-title">li</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-title">li</span>&gt;</span>36<span class="hljs-tag">&lt;/<span class="hljs-title">li</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-title">li</span>&gt;</span>37<span class="hljs-tag">&lt;/<span class="hljs-title">li</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-title">li</span>&gt;</span>38<span class="hljs-tag">&lt;/<span class="hljs-title">li</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-title">li</span>&gt;</span>39<span class="hljs-tag">&lt;/<span class="hljs-title">li</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-title">li</span>&gt;</span>40<span class="hljs-tag">&lt;/<span class="hljs-title">li</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-title">li</span>&gt;</span>41<span class="hljs-tag">&lt;/<span class="hljs-title">li</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-title">li</span>&gt;</span>42<span class="hljs-tag">&lt;/<span class="hljs-title">li</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-title">li</span>&gt;</span>43<span class="hljs-tag">&lt;/<span class="hljs-title">li</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-title">li</span>&gt;</span>44<span class="hljs-tag">&lt;/<span class="hljs-title">li</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-title">li</span>&gt;</span>45<span class="hljs-tag">&lt;/<span class="hljs-title">li</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-title">li</span>&gt;</span>46<span class="hljs-tag">&lt;/<span class="hljs-title">li</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-title">li</span>&gt;</span>47<span class="hljs-tag">&lt;/<span class="hljs-title">li</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-title">li</span>&gt;</span>48<span class="hljs-tag">&lt;/<span class="hljs-title">li</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-title">li</span>&gt;</span>49<span class="hljs-tag">&lt;/<span class="hljs-title">li</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-title">li</span>&gt;</span>50<span class="hljs-tag">&lt;/<span class="hljs-title">li</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-title">li</span>&gt;</span>51<span class="hljs-tag">&lt;/<span class="hljs-title">li</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-title">li</span>&gt;</span>52<span class="hljs-tag">&lt;/<span class="hljs-title">li</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-title">li</span>&gt;</span>53<span class="hljs-tag">&lt;/<span class="hljs-title">li</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-title">li</span>&gt;</span>54<span class="hljs-tag">&lt;/<span class="hljs-title">li</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-title">li</span>&gt;</span>55<span class="hljs-tag">&lt;/<span class="hljs-title">li</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-title">li</span>&gt;</span>56<span class="hljs-tag">&lt;/<span class="hljs-title">li</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-title">li</span>&gt;</span>57<span class="hljs-tag">&lt;/<span class="hljs-title">li</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-title">li</span>&gt;</span>58<span class="hljs-tag">&lt;/<span class="hljs-title">li</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-title">li</span>&gt;</span>59<span class="hljs-tag">&lt;/<span class="hljs-title">li</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-title">li</span>&gt;</span>60<span class="hljs-tag">&lt;/<span class="hljs-title">li</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-title">li</span>&gt;</span>61<span class="hljs-tag">&lt;/<span class="hljs-title">li</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-title">li</span>&gt;</span>62<span class="hljs-tag">&lt;/<span class="hljs-title">li</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-title">li</span>&gt;</span>63<span class="hljs-tag">&lt;/<span class="hljs-title">li</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-title">li</span>&gt;</span>64<span class="hljs-tag">&lt;/<span class="hljs-title">li</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-title">li</span>&gt;</span>65<span class="hljs-tag">&lt;/<span class="hljs-title">li</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-title">li</span>&gt;</span>66<span class="hljs-tag">&lt;/<span class="hljs-title">li</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-title">li</span>&gt;</span>67<span class="hljs-tag">&lt;/<span class="hljs-title">li</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-title">li</span>&gt;</span>68<span class="hljs-tag">&lt;/<span class="hljs-title">li</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-title">li</span>&gt;</span>69<span class="hljs-tag">&lt;/<span class="hljs-title">li</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-title">li</span>&gt;</span>70<span class="hljs-tag">&lt;/<span class="hljs-title">li</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-title">li</span>&gt;</span>71<span class="hljs-tag">&lt;/<span class="hljs-title">li</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-title">li</span>&gt;</span>72<span class="hljs-tag">&lt;/<span class="hljs-title">li</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-title">li</span>&gt;</span>73<span class="hljs-tag">&lt;/<span class="hljs-title">li</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-title">li</span>&gt;</span>74<span class="hljs-tag">&lt;/<span class="hljs-title">li</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-title">li</span>&gt;</span>75<span class="hljs-tag">&lt;/<span class="hljs-title">li</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-title">li</span>&gt;</span>76<span class="hljs-tag">&lt;/<span class="hljs-title">li</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-title">li</span>&gt;</span>77<span class="hljs-tag">&lt;/<span class="hljs-title">li</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-title">li</span>&gt;</span>78<span class="hljs-tag">&lt;/<span class="hljs-title">li</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-title">li</span>&gt;</span>79<span class="hljs-tag">&lt;/<span class="hljs-title">li</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-title">li</span>&gt;</span>80<span class="hljs-tag">&lt;/<span class="hljs-title">li</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-title">li</span>&gt;</span>81<span class="hljs-tag">&lt;/<span class="hljs-title">li</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-title">li</span>&gt;</span>82<span class="hljs-tag">&lt;/<span class="hljs-title">li</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-title">li</span>&gt;</span>83<span class="hljs-tag">&lt;/<span class="hljs-title">li</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-title">li</span>&gt;</span>84<span class="hljs-tag">&lt;/<span class="hljs-title">li</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-title">li</span>&gt;</span>85<span class="hljs-tag">&lt;/<span class="hljs-title">li</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-title">li</span>&gt;</span>86<span class="hljs-tag">&lt;/<span class="hljs-title">li</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-title">li</span>&gt;</span>87<span class="hljs-tag">&lt;/<span class="hljs-title">li</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-title">li</span>&gt;</span>88<span class="hljs-tag">&lt;/<span class="hljs-title">li</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-title">li</span>&gt;</span>89<span class="hljs-tag">&lt;/<span class="hljs-title">li</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-title">li</span>&gt;</span>90<span class="hljs-tag">&lt;/<span class="hljs-title">li</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-title">li</span>&gt;</span>91<span class="hljs-tag">&lt;/<span class="hljs-title">li</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-title">li</span>&gt;</span>92<span class="hljs-tag">&lt;/<span class="hljs-title">li</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-title">li</span>&gt;</span>93<span class="hljs-tag">&lt;/<span class="hljs-title">li</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-title">li</span>&gt;</span>94<span class="hljs-tag">&lt;/<span class="hljs-title">li</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-title">li</span>&gt;</span>95<span class="hljs-tag">&lt;/<span class="hljs-title">li</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-title">li</span>&gt;</span>96<span class="hljs-tag">&lt;/<span class="hljs-title">li</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-title">li</span>&gt;</span>97<span class="hljs-tag">&lt;/<span class="hljs-title">li</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-title">li</span>&gt;</span>98<span class="hljs-tag">&lt;/<span class="hljs-title">li</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-title">li</span>&gt;</span>99<span class="hljs-tag">&lt;/<span class="hljs-title">li</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-title">li</span>&gt;</span>100<span class="hljs-tag">&lt;/<span class="hljs-title">li</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-title">ul</span>&gt;</span>
  <span class="hljs-tag">&lt;/<span class="hljs-title">body</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-title">html</span>&gt;</span></code></pre></p>
    </section>
  </article>


  <article class="post tag-currying tag-fp tag-partial-application tag-functional-programming tag-js">
    <header class="post-header">
      <h2 class="post-title"><a href="/2016/currying-and-partial-application.html">currying and partial application</a></h2>
      <span class="post-meta">
        <time datetime="2016-05-05">05 May, 2016</time>
         | tags: <a href="/tag/currying/">currying</a>, <a href="/tag/fp/">fp</a>, <a href="/tag/partial-application/">partial-application</a>, <a href="/tag/functional-programming/">functional-programming</a>, <a href="/tag/js/">js</a></span>

      <br>

    </header>
    <section class="post-content">
      <p><pre class="hljs"><code><span class="hljs-comment">// Prototype&#39;s version?</span>
<span class="hljs-built_in">Function</span>.prototype.curry = <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>{
  <span class="hljs-keyword">var</span> fn   = <span class="hljs-keyword">this</span>
    , args = <span class="hljs-built_in">Array</span>.prototype.slice.call(<span class="hljs-built_in">arguments</span>)
  <span class="hljs-keyword">return</span> <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>{
    <span class="hljs-keyword">return</span> fn.apply(<span class="hljs-keyword">this</span>, args.concat(<span class="hljs-built_in">Array</span>.prototype.slice.call(<span class="hljs-built_in">arguments</span>)))
  }
}

<span class="hljs-comment">// Functional&#39;s version?</span>
<span class="hljs-built_in">Function</span>.prototype.partial = <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>{
  <span class="hljs-keyword">var</span> fn   = <span class="hljs-keyword">this</span>
    , args = <span class="hljs-built_in">Array</span>.prototype.slice.call(<span class="hljs-built_in">arguments</span>)
  <span class="hljs-keyword">return</span> <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>{
    <span class="hljs-keyword">var</span> arg = <span class="hljs-number">0</span>
    <span class="hljs-keyword">for</span> (<span class="hljs-keyword">var</span> i = <span class="hljs-number">0</span>; i &lt; args.length &amp;&amp; arg &lt; <span class="hljs-built_in">arguments</span>.length; i++) {
      <span class="hljs-keyword">if</span> (args[i] === <span class="hljs-literal">undefined</span>) {
        args [i] = <span class="hljs-built_in">arguments</span>[arg++]
      }
      <span class="hljs-keyword">return</span> fn.apply(<span class="hljs-keyword">this</span>, args)
    }
  }
}

<span class="hljs-comment">// from angus croll&#39;s blog</span>
<span class="hljs-comment">// note, the toArray is because the <code>arguments</code> array is actually and object</span>
<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">toArray</span>(<span class="hljs-params">enumm</span>)</span>{
  <span class="hljs-keyword">return</span> <span class="hljs-built_in">Array</span>.prototype.slice.call(enumm)
}
<span class="hljs-comment">// toArray is superfluous now, though, because we can just do</span>
<span class="hljs-keyword">let</span> args = <span class="hljs-built_in">Array</span>.from(<span class="hljs-built_in">arguments</span>)
<span class="hljs-comment">//</span>
<span class="hljs-built_in">Function</span>.prototype.curry = <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>{
  <span class="hljs-keyword">if</span> (<span class="hljs-built_in">arguments</span>.length &lt; <span class="hljs-number">1</span>) {
    <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>
  }
  <span class="hljs-keyword">var</span> <strong> method = <span class="hljs-keyword">this</span>
    , args      = toArray(<span class="hljs-built_in">arguments</span>)
  <span class="hljs-keyword">return</span> <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>{
    <span class="hljs-keyword">return</span> </strong>method.apply(<span class="hljs-keyword">this</span>, args.concat(toArray(<span class="hljs-built_in">arguments</span>)))
  }
}
<span class="hljs-comment">// and an example from his blog, using the above</span>
<span class="hljs-keyword">const</span>
  converter = (ratio, symbol, input) =&gt; [(input <em> ratio).toFixed(<span class="hljs-number">1</span>), symbol].join(<span class="hljs-string">&#39; &#39;</span>)
, kgToLb    = converter.curry(<span class="hljs-number">2.2</span>, <span class="hljs-string">&#39;lbs&#39;</span>)
, liToPi    = converter.curry(<span class="hljs-number">1.98</span>, <span class="hljs-string">&#39;pints&#39;</span>)
, miToKm    = converter.curry(<span class="hljs-number">1.62</span>, <span class="hljs-string">&#39;km&#39;</span>)


<span class="hljs-comment">// note that these are all examples of partial application,</span>
<span class="hljs-comment">// not true currying as one would have in a purely functional language</span>
<span class="hljs-comment">// see:</span>
<span class="hljs-keyword">const</span> foo = (a, b) =&gt; a + b
foo.partiallyApply(<span class="hljs-number">2</span>) <span class="hljs-comment">// b =&gt; 2 + b</span>
foo.curry() <span class="hljs-comment">// a =&gt; b =&gt; a + b</span>
foo.curry()(<span class="hljs-number">2</span>) <span class="hljs-comment">// foo.partiallyApply(2)</span>

<span class="hljs-built_in">Function</span>.prototype.curry = <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>{
  <span class="hljs-keyword">var</span>
    method = <span class="hljs-keyword">this</span>
  , i      = <span class="hljs-number">0</span>
  , len    = <span class="hljs-keyword">this</span>.length
  , args   = []

  <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">f</span>(<span class="hljs-params"></span>) </span>{
    args.push(<span class="hljs-built_in">arguments</span>[<span class="hljs-number">0</span>])
    <span class="hljs-keyword">if</span> (++i &lt; len) {
      <span class="hljs-keyword">return</span> f
    } <span class="hljs-keyword">else</span> {
      method.apply(<span class="hljs-keyword">this</span>, args)
    }
  }
  <span class="hljs-keyword">return</span> f
}

<span class="hljs-comment">// here&#39;s a super simplistic adding thingy</span>
<span class="hljs-keyword">const</span> adder = (a, b) =&gt; <span class="hljs-keyword">typeof</span>(b) !== <span class="hljs-string">&#39;undefined&#39;</span> ? a + b : c =&gt; a + c
<span class="hljs-comment">// i think the es6 is right for this? in es5 also:</span>
<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">adder</span>(<span class="hljs-params">a, b</span>) </span>{
  <span class="hljs-keyword">if</span> (<span class="hljs-keyword">typeof</span> b !== <span class="hljs-string">&#39;undefined&#39;</span>) {
    <span class="hljs-keyword">return</span> a + b
  } <span class="hljs-keyword">else</span> {
    <span class="hljs-keyword">return</span> <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">c</span>)</span>{
      <span class="hljs-keyword">return</span> a + c
    }
  }
}

<span class="hljs-comment">// the real difference between partial application and currying:</span>
<span class="hljs-comment">// a curried function will accept ONLY one argument at a time.</span>
<span class="hljs-comment">// it will continue accepting one argument each time it&#39;s called right</span>
<span class="hljs-comment">// up until it&#39;s got enough, then will finally be executed for realz.</span>

<span class="hljs-comment">// so: a function that can take a function as input, and an int for</span>
<span class="hljs-comment">// the max args. should be able to call like so:</span>
curry(fn, n, ...args) <span class="hljs-comment">// ... that is,</span>
curry(fn, n, <span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>) <span class="hljs-comment">// or</span>
curry(fn, n)(<span class="hljs-number">1</span>)(<span class="hljs-number">2</span>)(<span class="hljs-number">3</span>) <span class="hljs-comment">// or</span>
curry(fn, n)(<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>) <span class="hljs-comment">// and we should get the same results each way.</span>
<span class="hljs-comment">// so</span>
curry(fn, n, <span class="hljs-number">1</span>, <span class="hljs-number">2</span>)(<span class="hljs-number">3</span>, <span class="hljs-number">4</span>) == curry(fn, n, <span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>, <span class="hljs-number">4</span>)

<span class="hljs-comment">// notes on the below:</span>
<span class="hljs-comment">// fn.apply(a, [1, 2, 3]) is kinda the same as doing</span>
<span class="hljs-comment">// fn.call(a, 1, 2, 3), where <code>a</code> is <code>this</code></span>
<span class="hljs-keyword">const</span> argsArr = args =&gt; <span class="hljs-built_in">Array</span>.from(args)

<span class="hljs-keyword">const</span> curry = (fn, n) =&gt; {
  <span class="hljs-keyword">const</span> args = argsArr(<span class="hljs-built_in">arguments</span>)
  <span class="hljs-keyword">if</span> (n === args.length -<span class="hljs-number">2</span>) {
    <span class="hljs-keyword">return</span> fn.apply(<span class="hljs-literal">undefined</span>, args.slice(<span class="hljs-number">2</span>))
  } <span class="hljs-keyword">else</span> {
    <span class="hljs-keyword">return</span> () =&gt; {
      <span class="hljs-keyword">return</span> curry.apply(<span class="hljs-literal">undefined</span>, args.concat(<span class="hljs-built_in">arguments</span>))
    }
  }
}
<span class="hljs-comment">// so try:</span>
<span class="hljs-keyword">const</span> addFour = (a, b, c, d) =&gt; a + b + c + d
curry(addFour, <span class="hljs-number">4</span>, <span class="hljs-number">8</span>, <span class="hljs-number">16</span>)(<span class="hljs-number">1</span>, <span class="hljs-number">2</span>)

<span class="hljs-comment">// modified to use Function.length</span>
<span class="hljs-keyword">const</span> newCurry = (fn, n) =&gt; {
  <span class="hljs-keyword">let</span> args = argsArr(<span class="hljs-built_in">arguments</span>)
  <span class="hljs-keyword">if</span> (<span class="hljs-keyword">typeof</span>(n) == <span class="hljs-string">&#39;undefined&#39;</span>) {
    args[<span class="hljs-number">1</span>] = fn.length
  }
  <span class="hljs-keyword">if</span> (n === args.length - <span class="hljs-number">2</span>) {
    <span class="hljs-keyword">return</span> fn.apply(<span class="hljs-literal">undefined</span>, args.slice(<span class="hljs-number">2</span>))
  }
  <span class="hljs-keyword">return</span> <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>{
    <span class="hljs-keyword">return</span> newCurry.apply(<span class="hljs-literal">undefined</span>, args.concat(argsArr(<span class="hljs-built_in">arguments</span>)))
  }
}


<span class="hljs-comment">// okay, so, from some other blog</span>
<span class="hljs-keyword">const</span> objs = [{id : <span class="hljs-number">1</span>}, {id : <span class="hljs-number">2</span>}, {id : <span class="hljs-number">3</span>}, {id : <span class="hljs-number">4</span>}]
objs.map(o =&gt; o.id)
<span class="hljs-comment">// this is actualy a lot cleaner than his example, because he&#39;s doing it like</span>
<span class="hljs-keyword">var</span> objs = [{id : <span class="hljs-number">1</span>}, {id : <span class="hljs-number">2</span>}, {id : <span class="hljs-number">3</span>}, {id : <span class="hljs-number">4</span>}]
objs.map(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">o</span>)</span>{<span class="hljs-keyword">return</span> o.id})
<span class="hljs-comment">// but we&#39;ll see where this goes, anyway</span>
<span class="hljs-keyword">const</span> curry = <span class="hljs-built_in">require</span>(<span class="hljs-string">&#39;curry&#39;</span>) <span class="hljs-comment">// npm i -S curry</span>
<span class="hljs-keyword">const</span> get = curry(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">property, object</span>)</span>{<span class="hljs-keyword">return</span> object[property]})
objs.map(get(<span class="hljs-string">&#39;id&#39;</span>))
<span class="hljs-comment">// meh.</span>
<span class="hljs-keyword">const</span> getIDs = <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">objects</span>)</span>{
  <span class="hljs-keyword">return</span> objects.map(get(<span class="hljs-string">&#39;id&#39;</span>))
}
getIDs(objs)
<span class="hljs-comment">// double meh.</span>
<span class="hljs-keyword">const</span> map    = curry((fn, val) =&gt; val.map(fn))
    , getIDs = map(get(<span class="hljs-string">&#39;id&#39;</span>))

<span class="hljs-comment">// still not sure this is actually cleaner xD</span>
<span class="hljs-comment">// let&#39;s keep going with his examples (translated to ES2015, though)</span>
<span class="hljs-comment">// some sample data (we&#39;ll pretend this is JSON we&#39;re getting from somewhere):</span>
<span class="hljs-keyword">const</span> sampleData = {
  <span class="hljs-string">&quot;user&quot;</span>  : <span class="hljs-string">&quot;z&quot;</span>
  , <span class="hljs-string">&quot;posts&quot;</span> : [
    {<span class="hljs-string">&quot;title&quot;</span> : <span class="hljs-string">&quot;title!&quot;</span>     , <span class="hljs-string">&quot;contents&quot;</span> : <span class="hljs-string">&quot;asdf&quot;</span>  }
  , {<span class="hljs-string">&quot;title&quot;</span> : <span class="hljs-string">&quot;something!&quot;</span> , <span class="hljs-string">&quot;contents&quot;</span> : <span class="hljs-string">&quot;ghjkl;&quot;</span>}
  ]
}
<span class="hljs-built_in">require</span>(<span class="hljs-string">&#39;http&#39;</span>).get(<span class="hljs-string">&#39;something.whatever/that/data.json&#39;</span>)
.then(<span class="hljs-built_in">JSON</span>.parse)
.then(data =&gt; data.posts)
.then(posts =&gt; posts.map(post =&gt; post.title))
<span class="hljs-comment">// or, using the curry stuff</span>
<span class="hljs-built_in">require</span>(<span class="hljs-string">&#39;http&#39;</span>).get(<span class="hljs-string">&#39;something.whatever/that/data.json&#39;</span>)
.then(<span class="hljs-built_in">JSON</span>.parse)
.then(get(<span class="hljs-string">&#39;posts&#39;</span>))
.then(map(get(<span class="hljs-string">&#39;title&#39;</span>)))
<span class="hljs-comment">// uh</span>
<span class="hljs-comment">// okay</span>
<span class="hljs-comment">// i don&#39;t see that this is any better, here.</span>
<span class="hljs-comment">// oh wait, he wrote a follow-up!</span>

<span class="hljs-comment">// shit. i think some of this might be wrong.</span>
<span class="hljs-comment">// there&#39;s no <code>arguments</code>! i knew about <code>this</code>, but not <code>arguments</code>.</span>
<span class="hljs-comment">// (talking about when using <code>=&amp;gt;</code>, i mean.)</span>
<span class="hljs-comment">// not really a big deal, just in the above, we need to use <code>...args</code> instead.</span>
<span class="hljs-comment">// for example,</span>
<span class="hljs-keyword">let</span> sum = (...nums) =&gt; nums.reduce((a, b) =&gt; a + b)



<span class="hljs-comment">// examples:</span>
<span class="hljs-comment">// in es5:</span>
<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">formatter</span>(<span class="hljs-params">tag, text</span>)</span>{
  <span class="hljs-keyword">return</span> <span class="hljs-string">&#39;&lt;&#39;</span> + tag + <span class="hljs-string">&#39;&gt;&#39;</span> + text + <span class="hljs-string">&#39;&lt;/&#39;</span> + tag + <span class="hljs-string">&#39;&gt;&#39;</span>
}
<span class="hljs-keyword">var</span> p = formatter.bind(<span class="hljs-literal">undefined</span>, <span class="hljs-string">&#39;p&#39;</span>)
p(<span class="hljs-string">&#39;some content!&#39;</span>)
<span class="hljs-comment">// in es6:</span>
<span class="hljs-keyword">const</span> formatter = (tag, text) =&gt; <span class="hljs-string"><code>&amp;lt;&lt;span class=&quot;hljs-subst&quot;&gt;${tag}&lt;/span&gt;&amp;gt;&lt;span class=&quot;hljs-subst&quot;&gt;${text}&lt;/span&gt;&amp;lt;/&lt;span class=&quot;hljs-subst&quot;&gt;${tag}&lt;/span&gt;&amp;gt;</code></span>
<span class="hljs-keyword">const</span> p = text =&gt; formatter(<span class="hljs-string">&#39;p&#39;</span>, text)
<span class="hljs-comment">// accepting addtional arguments (more text):</span>
<span class="hljs-keyword">const</span> fmt = (tag, text, moar) =&gt; <span class="hljs-string"><code>&amp;lt;&lt;span class=&quot;hljs-subst&quot;&gt;${tag}&lt;/span&gt;&amp;gt;&lt;span class=&quot;hljs-subst&quot;&gt;${text}&lt;/span&gt;&lt;span class=&quot;hljs-subst&quot;&gt;${moar}&lt;/span&gt;&amp;lt;/&lt;span class=&quot;hljs-subst&quot;&gt;${tag}&lt;/span&gt;&amp;gt;</code></span>
<span class="hljs-keyword">const</span> span = ...args =&gt; fmt(<span class="hljs-string">&#39;span&#39;</span>, ...args)

<span class="hljs-comment">// okay, that&#39;s cute because it just lets you specify however many you want, but...</span>
<span class="hljs-keyword">const</span> cur = (fn, ...argsOne) =&gt; (...argsTwo) =&gt; fn(...argsOne, ...argsTwo)
<span class="hljs-comment">// or, allowing placeholders, as in underscore:</span>
<span class="hljs-keyword">const</span> curMore = (fn, ...argsOne) =&gt; {
  <span class="hljs-keyword">let</span> i = argsOne.indexOf(<em>)
  <span class="hljs-keyword">let</span> argsOne = (i === -<span class="hljs-number">1</span>) ? [] : argsOne.splice(i).slice(<span class="hljs-number">1</span>)
  <span class="hljs-keyword">return</span> (...argsTwo) =&gt; fn(...argsOne, ...argsTwo, ...argsThree)
}
<span class="hljs-comment">// which can then be used like:</span>
<span class="hljs-keyword">const</span> lessTen = curMore(subtract, </em>, <span class="hljs-number">10</span>) <span class="hljs-comment">// assuming we&#39;ve defined a <code>subtract</code> somewhere</span>



<span class="hljs-comment">// from brian lonsdorf&#39;s blog/medium, a better <code>curry</code> (better in that</span>
<span class="hljs-comment">// it should be easier to debug).</span>
<span class="hljs-comment">// <span class="hljs-doctag">note:</span> very definitely es5. and redifines toString().</span>
<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">curry</span>(<span class="hljs-params">fx</span>)</span>{
  <span class="hljs-keyword">var</span> arity = fx.length
  <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">f1</span>(<span class="hljs-params"></span>)</span>{
    <span class="hljs-keyword">var</span> args = <span class="hljs-built_in">Array</span>.prototype.slice.call(<span class="hljs-built_in">arguments</span>, <span class="hljs-number">0</span>)
    <span class="hljs-keyword">if</span> (args.length &gt;= arity) {
      <span class="hljs-keyword">return</span> fx.apply(<span class="hljs-literal">null</span>, args)
    }
    <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">f2</span>(<span class="hljs-params"></span>)</span>{
      <span class="hljs-keyword">return</span> f1.apply(<span class="hljs-literal">null</span>, args.concat(<span class="hljs-built_in">Array</span>.prototype.slice.call(<span class="hljs-built_in">arguments</span>, <span class="hljs-number">0</span>)))
    }
    f2.toString = <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>{
      <span class="hljs-keyword">return</span> fToString(fx) + <span class="hljs-string">&#39;(&#39;</span> + args.join(<span class="hljs-string">&#39;, &#39;</span>) + <span class="hljs-string">&#39;)&#39;</span>
    }
    <span class="hljs-keyword">return</span> f2
  }
  f1.toString = <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>{
    <span class="hljs-keyword">return</span> fToString(fx)
  }
  <span class="hljs-keyword">return</span> f1
}
<span class="hljs-comment">// and a compose from the same:</span>
<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">compose</span>(<span class="hljs-params"></span>)</span>{
  <span class="hljs-keyword">var</span> fns = <span class="hljs-built_in">arguments</span>
  <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">f</span>(<span class="hljs-params">result</span>)</span>{
    <span class="hljs-keyword">for</span> (<span class="hljs-keyword">var</span> i = fns.length - <span class="hljs-number">1</span>; i &gt; -<span class="hljs-number">1</span>; i--) {
      <span class="hljs-keyword">try</span> {
        result = fns[i].call(<span class="hljs-keyword">this</span>, result)
      } <span class="hljs-keyword">catch</span>(e) {
        e.message = f.toString() + <span class="hljs-string">&#39; failed at &#39;</span> fns[i].toString()
        <span class="hljs-keyword">throw</span>(e)
      }
    }
    f.toString = <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>{
      <span class="hljs-keyword">return</span> <span class="hljs-string">&#39;compose(&#39;</span>+[].slice.call(fns).map(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">f</span>)</span>{ <span class="hljs-keyword">return</span> f.toString() }).join(<span class="hljs-string">&#39;, &#39;</span>)+<span class="hljs-string">&#39;)&#39;</span>;
    }
    <span class="hljs-keyword">return</span> result
  }
  <span class="hljs-keyword">return</span> f
}



<span class="hljs-comment">// from reginald braithwaite&#39;s blog</span>
<span class="hljs-comment">// </em> arity: number of arguments a function accepts</span>
<span class="hljs-comment">//   <em> nullary function takes no arguments</span>
<span class="hljs-comment">//   </em> unary function accepts one</span>
<span class="hljs-comment">//   <em> polyadic function accepts more than one</span>
<span class="hljs-comment">//   </em> binary accepts two</span>
<span class="hljs-comment">//   <em> ternary function accepts three</span>
<span class="hljs-comment">//   </em> variadic function accepts a variable number of arguments</span>

<span class="hljs-comment">// a map fn</span>
<span class="hljs-keyword">const</span> <strong> map = [].map
<span class="hljs-keyword">const</span> square = n =&gt; n * n
<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">map</span>(<span class="hljs-params">list, unary</span>)</span>{
  <span class="hljs-keyword">return</span> </strong>map.call(list, unaryFn)
}
map([<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>, <span class="hljs-number">4</span>], square)

<span class="hljs-comment">// this is fine as long as map gets both arguments (is fully applied)</span>
<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">mapWrap</span>(<span class="hljs-params">unaryFn</span>)</span>{
  <span class="hljs-keyword">return</span> <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">list</span>)</span>{
    <span class="hljs-keyword">return</span> map(list, unaryFn)
  }
}
mapWrap(square)([<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>, <span class="hljs-number">4</span>])

<span class="hljs-keyword">const</span> squareAll = mapWrap(square)
squareAll([<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>, <span class="hljs-number">4</span>])

<span class="hljs-comment">// woot! that&#39;s fine, but annoying to write. so, a function to wrap functions:</span>
<span class="hljs-comment">// const wrapper = unaryFn =&gt; list =&gt; map(list, unaryFn) // can become:</span>
<span class="hljs-comment">// const wrapper = second =&gt; first =&gt; binaryFn(first, second) // can become:</span>
<span class="hljs-keyword">const</span> rightCurry = binaryFn =&gt; secondArgument =&gt; firstArgument =&gt; binaryFn(firstArgument, secondArgument)
<span class="hljs-comment">// which can be used like</span>
<span class="hljs-keyword">const</span> rightCurryMap = rightCurry(map)
<span class="hljs-keyword">const</span> squareAll     = rightCurryMap(square)
squareAll([<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>, <span class="hljs-number">4</span>])
<span class="hljs-comment">// calling this rightCurry because it takes any binary function and curries into a chain</span>
<span class="hljs-comment">// of unary functions, starting with the second argument. a curry that starts on the left</span>
<span class="hljs-comment">// is more common, and it&#39;s usually what people mean.</span>
<span class="hljs-keyword">const</span> curry = binaryFn =&gt; firstArg =&gt; secondArg =&gt; binaryFn(firstArg, secondArg)
<span class="hljs-keyword">const</span> cMap  = curry(map)
<span class="hljs-keyword">const</span> twice         = n =&gt; n + n <span class="hljs-comment">// why did i write this down?</span>
<span class="hljs-comment">// whether one goes with a leftmost or rightmost curry could depend on which things</span>
<span class="hljs-comment">// you might need to name and/or reuse</span>

<span class="hljs-comment">// okay so apparently a pattern like this:</span>
<span class="hljs-keyword">const</span> squareAll = rightCurry(map)(square)
<span class="hljs-keyword">const</span> doubleAll = rightCurry(map)(twice)
<span class="hljs-comment">// is called a:</span>
<span class="hljs-comment">// rightmost unary partial application of the map function</span>
<span class="hljs-comment">// which means it starts from the right, takes one arg, applies not all of the args, and works on the map fn</span>

<span class="hljs-comment">// the wrong way to build a first-class function to do this would be:</span>
<span class="hljs-keyword">const</span> rightUnPartApp = (binaryFn, secondArg) =&gt; rightCurr(binaryFn)(secondArg)
<span class="hljs-comment">// and a better way might be</span>
<span class="hljs-keyword">const</span> lastApplication = (binaryFn, secondArg) =&gt; firstArg =&gt; binaryFn(firstArg, secondArg)
<span class="hljs-comment">// which means we could do</span>
<span class="hljs-keyword">const</span> squareAll = lastApplication(map, square)
<span class="hljs-keyword">const</span> doubleAll = lastApplication(map, twice)
<span class="hljs-comment">// and so, we could do</span>
<span class="hljs-keyword">const</span> firstApp = (binaryFn, firstArg) =&gt; secondArg =&gt; binaryFn(firstArg, secondArg)

<span class="hljs-comment">// SO. wat.</span>
<span class="hljs-comment">// Currying : decomposition of a polyadic function into a chain of nested unary functions. Thus,</span>
<span class="hljs-comment">// decomposed, you can partially apply one or more arguments, although the curry operation itself</span>
<span class="hljs-comment">// does not apply any arguments to the function.</span>
<span class="hljs-comment">// Partial application : conversion of a polyadic function into a function taking fewer arguments</span>
<span class="hljs-comment">// by providing one or more arguments in advance.</span>




<span class="hljs-comment">// this is approximately the same as wu.js&#39;s .autoCurry() (which has been removed??)</span>
<span class="hljs-comment">// (es5, obvs. <span class="hljs-doctag">todo:</span> simplify, basically just by making it es6.)</span>
<span class="hljs-keyword">var</span> autoCurry = (<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>{

  <span class="hljs-keyword">var</span>
    toArray = <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">toArray</span>(<span class="hljs-params">arr, from</span>)</span>{
    <span class="hljs-keyword">return</span> <span class="hljs-built_in">Array</span>.prototype.slice.call(arr, from || <span class="hljs-number">0</span>)
  }

, curry = <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">curry</span>(<span class="hljs-params">fn</span>) </span>{
    <span class="hljs-keyword">var</span> args = toArray(<span class="hljs-built_in">arguments</span>, <span class="hljs-number">1</span>)
    <span class="hljs-keyword">return</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">curried</span>(<span class="hljs-params"></span>)</span>{
      <span class="hljs-keyword">return</span> fn.apply(<span class="hljs-keyword">this</span>, args.concat(toArray(<span class="hljs-built_in">arguments</span>)))
    }
  }

  <span class="hljs-keyword">return</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">autoCurry</span>(<span class="hljs-params">fn, numArgs</span>)</span>{
    numArgs = numArgs || fn.length
    <span class="hljs-keyword">return</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">autoCurried</span>(<span class="hljs-params"></span>)</span>{
      <span class="hljs-keyword">if</span> (<span class="hljs-built_in">arguments</span>.length &lt; numArgs) {
        <span class="hljs-keyword">return</span> numArgs - <span class="hljs-built_in">arguments</span>.length &gt; <span class="hljs-number">0</span> ?
        autoCurry(curry.apply(<span class="hljs-keyword">this</span>, [fn].concat(toArray(<span class="hljs-built_in">arguments</span>)))
      , numArgs - <span class="hljs-built_in">arguments</span>.length)           :
        curry.apply(<span class="hljs-keyword">this</span>, [fn].concat(toArray(<span class="hljs-built_in">arguments</span>)))
      } <span class="hljs-keyword">else</span> {
        <span class="hljs-keyword">return</span> fn.apply(<span class="hljs-keyword">this</span>, <span class="hljs-built_in">arguments</span>)
      }
    }
  }

}())


<span class="hljs-comment">// one more</span>
<span class="hljs-keyword">const</span> curry = fn =&gt; {
  <span class="hljs-keyword">const</span> length = fn.length
  <span class="hljs-keyword">const</span> acc = (...args) =&gt; {
    <span class="hljs-keyword">if</span> (args.length === length) <span class="hljs-keyword">return</span> fn(...args)
    <span class="hljs-keyword">return</span> (...args) =&gt; acc(...args.concat(args))
  }
  <span class="hljs-keyword">return</span> acc
}</code></pre></p>
    </section>
  </article>


  <nav class="pagination" role="navigation">
        <a class="newer-posts" href="/tag/js/">&larr; Newer Posts</a>
    <span class="page-number">Page 2 of 3</span>
        <a class="older-posts" href="/tag/js/page/3/">Older Posts &rarr;</a>
</nav>


</div>


    <footer class="site-footer">
      <a class="subscribe icon-feed" href="http://blog.zacanger.com/rss/index.xml"><span class="tooltip">Subscribe!</span></a>
      <div class="">
        <section class="copyright">content by <a href="http://zacanger.com">zac anger</a>.</section>
        <section class="poweredby">
          <a href="http://zacanger.com/LICENSE.txt">under the WTFPL</a> &middot;
          <a href="https://twitter.com/@zacanger">twitter</a> &middot;
          <a href="https://github.com/zacanger">github</a>
        </section>
      </div>
    </footer>

    <script src="/assets/js/jquery.min.js"></script>

    <script type="text/javascript" src="/assets/js/index.js"></script>

  </div>
</body>
</html>
